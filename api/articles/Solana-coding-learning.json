{"title":"Solana escrowåˆçº¦ ç¼–ç¨‹å­¦ä¹ ","uid":"52d0fe63d1c1ad7c08273efe980dc2ed","slug":"Solana-coding-learning","date":"2024-09-01T14:56:16.000Z","updated":"2024-09-03T13:03:58.620Z","comments":true,"path":"api/articles/Solana-coding-learning.json","keywords":null,"cover":"/img/Solana-coding-learning-cover.jpg","content":"<h2 id=\"å‰è¨€\"><a href=\"#å‰è¨€\" class=\"headerlink\" title=\"å‰è¨€\"></a>å‰è¨€</h2><p>è‹¦äºsolanaå…¥é—¨é—¨æ§›ï¼Œå¯¹äºåšä¸»è¿™æ ·çš„åŒºå—é“¾å°ç™½è€Œè¨€ï¼Œç¡®å®æœ‰äº›å¹¸è‹¦ğŸ˜­ã€‚æ‰€ä»¥ï¼Œç»è¿‡æŸ¥è¯¢ï¼Œæ‰¾åˆ°äº†ä¸€ç¯‡ç®€å•çš„å…¥é—¨æ•™ç¨‹ğŸ“–ã€‚</p>\n<p>åŒæ—¶ï¼Œè¿™æ˜¯æœ¬æ¬¡å­¦ä¹ çš„<a href=\"https://paulx.dev/blog/2021/01/14/programming-on-solana-an-introduction/\">æºæ–‡ç« </a></p>\n<p>æˆ‘çš„ç›¸å…³å­¦ä¹ èµ„æ–™ä¼šæ”¾åœ¨æˆ‘çš„<a href=\"https://github.com/RaphaelNY/Solana_Rustlearning\">githubä»“åº“</a>ä¸­</p>\n<div class=\"custom-quote tip\">\n<span class=\"custom-quote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M20.86 14.13C20 14.7 19.56 15.74 19.77 16.76C20.13 18.55 18.55 20.13 16.76 19.77C15.74 19.57 14.7 20 14.13 20.86C13.12 22.38 10.89 22.38 9.88 20.86C9.3 20 8.26 19.56 7.24 19.77C5.45 20.13 3.87 18.55 4.23 16.76C4.43 15.74 4 14.7 3.14 14.13C1.62 13.12 1.62 10.89 3.14 9.88C4 9.3 4.44 8.26 4.23 7.24C3.87 5.45 5.45 3.87 7.24 4.23C8.26 4.44 9.3 4 9.87 3.14C10.88 1.62 13.11 1.62 14.12 3.14C14.7 4 15.74 4.44 16.76 4.23C18.55 3.87 20.13 5.45 19.77 7.24C19.56 8.26 20 9.3 20.86 9.87C22.38 10.88 22.38 13.12 20.86 14.13Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12.01 15C12.01 14.5 12.01 14.5 12.01 14.5C12.04 13.75 13 13.46 14.04 12.2C14.41 11.74 14.69 11.41 14.86 10.85C15.15 9.95 14.92 9.18 14.86 9.02C14.8 8.79 14.52 8 13.72 7.46C13.06 7.02 12.42 7 12.14 7C11.9 7 11.36 7 10.78 7.3C10.28 7.56 9.98 7.9 9.83 8.1C9.24 8.82 9.06 9.63 9 10.06\"></path>\n<path stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M11.99 18H12.01\"></path>\n</svg></span>\n<p class=\"custom-quote-title\">TIP</p>\n<p>å¦‚æœä½ å¯¹æ–¼åŒºå—é“¾æ²¡æœ‰ä»»ä½•çŸ¥è¯†ï¼Œæˆ–è€…è¯´ä½ å®Œå…¨æ²¡äº†è§£solanaï¼Œä½ ä¹Ÿè®¸å¯ä»¥å…ˆè€ƒè™‘ä»¥ä¸‹videoå’Œæ–‡æ¡£</p>\n<ol>\n<li>ğŸ“º<a href=\"https://www.bilibili.com/video/BV1h54y1u7RY/?spm_id_from=333.788.recommend_more_video.0&vd_source=63572e2cc5e7fe87e67360da18893d03\">ã€Solanaå¼€å‘è¯¾ã€‘å­¦ä¹ ä½¿ç”¨Rust+JavaScriptè¿›è¡ŒSolanaåŒºå—é“¾å¼€å‘ | æŒæ¡ Web3ã€DAppã€NFTã€DeFiç­‰äº§å“å¼€å‘ | ä¸­æ–‡å­—å¹•</a></li>\n<li>ğŸ“–<a href=\"https://www.solana-cn.com/SolanaDocumention/intro/overview.html\">ä»‹ç» | Solanaä¸­æ–‡å¤§å…¨ (solana-cn.com)</a></li>\n<li>ğŸ“–<a href=\"https://docs.solanalabs.com/\">Home | Solana Validator (solanalabs.com)</a></li>\n<li>ğŸ“–<a href=\"https://solana.com/zh/docs\">Solana Documentation | Solana</a></li>\n<li><a href=\"https://learnblockchain.cn/article/8154\">Solana æ™ºèƒ½åˆçº¦æŒ‡å— | ç™»é“¾ç¤¾åŒº | åŒºå—é“¾æŠ€æœ¯ç¤¾åŒº (learnblockchain.cn)</a></li>\n</ol>\n<p>è¿™è¾¹å»ºè®®ä½¿ç”¨â‘¡çš„æ–‡æ¡£ï¼Œæœ‰ä¸€è¯´ä¸€â‘£çš„zhç¿»è¯‘çœŸçš„æ˜¯ç¿»ä¸€åŠğŸ˜¤æˆ‘è¿˜æ˜¯å€¾å‘äºçœ‹äººè¯ç¿»è¯‘å‡ºæ¥çš„</p>\n\n</div>\n<h2 id=\"å‰æœŸå‡†å¤‡\"><a href=\"#å‰æœŸå‡†å¤‡\" class=\"headerlink\" title=\"å‰æœŸå‡†å¤‡\"></a>å‰æœŸå‡†å¤‡</h2><p>å®‰è£…Solana-cilã€‚æˆ‘è¿˜æ˜¯æ¨èä½¿ç”¨âš™ï¸Cargoæ¥è¿›è¡ŒåŒ…ç®¡ç†ï¼Œè€Œä¸æ˜¯ä½¿ç”¨å…¶ä»–é€”å¾„è¿›è¡Œå®‰è£…ğŸ¤—è£…ä¸äº†å»ºè®®æ¢ç½‘</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cargo install solana-cli --locked --version 1.9.1</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ³¨æ„ä½ çš„âš™ï¸rustæœ€å¥½ä½¿ç”¨æœ€æ–°çš„ç‰ˆæœ¬ï¼Œsolana-cilçš„ç‰ˆæœ¬ä¹Ÿå»ºè®®ä½¿ç”¨æœ€æ–°çš„ï¼Œè¯¦ç»†å¯ä»¥å‚è€ƒ<a href=\"https://crate.io/\">crate.io</a><a href=\"%E4%B9%9F%E8%AE%B8%E4%B9%9F%E5%8F%AF%E4%BB%A5%E4%B8%8D%E7%94%A8%E7%89%B9%E5%9C%B0%E5%AE%89%E8%A3%85solana-cil%F0%9F%A4%94%E9%80%9A%E8%BF%87%60cargo.toml%60%E5%8F%AF%E4%BB%A5%E5%BE%88%E8%BD%BB%E6%9D%BE%E7%9A%84%E5%AF%BC%E5%85%A5solana.cil%EF%BC%8C%E4%BD%A0%E4%BD%BF%E7%94%A8vscode%E6%88%96%E8%80%85RustRover%E9%83%BD%E4%BC%9A%E8%87%AA%E5%8A%A8%E4%B8%8B%E8%BD%BD%EF%BC%8C%E5%81%87%E5%A6%82%E6%88%91%E5%90%8E%E9%9D%A2%E5%8F%91%E7%8E%B0%E6%9C%89%E4%BB%80%E4%B9%88%E9%97%AE%E9%A2%98%EF%BC%8C%E6%88%91%E4%BC%9A%E6%9D%A5%E6%9B%B4%E6%AD%A3%E8%BF%99%E6%AE%B5%E6%B3%A8%E9%87%8A\">^1</a>ã€‚</li>\n</ul>\n<h2 id=\"é¡¹ç›®åˆ›å»º\"><a href=\"#é¡¹ç›®åˆ›å»º\" class=\"headerlink\" title=\"é¡¹ç›®åˆ›å»º\"></a>é¡¹ç›®åˆ›å»º</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cargo new escrow --lib</span><br></pre></td></tr></table></figure>\n\n<div class=\"custom-quote tip\">\n<span class=\"custom-quote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M20.86 14.13C20 14.7 19.56 15.74 19.77 16.76C20.13 18.55 18.55 20.13 16.76 19.77C15.74 19.57 14.7 20 14.13 20.86C13.12 22.38 10.89 22.38 9.88 20.86C9.3 20 8.26 19.56 7.24 19.77C5.45 20.13 3.87 18.55 4.23 16.76C4.43 15.74 4 14.7 3.14 14.13C1.62 13.12 1.62 10.89 3.14 9.88C4 9.3 4.44 8.26 4.23 7.24C3.87 5.45 5.45 3.87 7.24 4.23C8.26 4.44 9.3 4 9.87 3.14C10.88 1.62 13.11 1.62 14.12 3.14C14.7 4 15.74 4.44 16.76 4.23C18.55 3.87 20.13 5.45 19.77 7.24C19.56 8.26 20 9.3 20.86 9.87C22.38 10.88 22.38 13.12 20.86 14.13Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12.01 15C12.01 14.5 12.01 14.5 12.01 14.5C12.04 13.75 13 13.46 14.04 12.2C14.41 11.74 14.69 11.41 14.86 10.85C15.15 9.95 14.92 9.18 14.86 9.02C14.8 8.79 14.52 8 13.72 7.46C13.06 7.02 12.42 7 12.14 7C11.9 7 11.36 7 10.78 7.3C10.28 7.56 9.98 7.9 9.83 8.1C9.24 8.82 9.06 9.63 9 10.06\"></path>\n<path stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M11.99 18H12.01\"></path>\n</svg></span>\n<p class=\"custom-quote-title\">TIP</p>\n<p><p>æ³¨æ„ï¼Œä¸‹è¿°æ–‡ä»¶é™¤äº†.tomlæ–‡ä»¶ï¼Œå…¶ä½™éƒ½åœ¨.&#x2F;src&#x2F;ç›®å½•ä¸‹</p>\n</p>\n</div>\n<figure class=\"highlight toml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Xargo.toml // æ–‡ä»¶å</span><br><span class=\"line\"><span class=\"section\">[target.bpfel-unknown.dependencies.std]</span></span><br><span class=\"line\"><span class=\"attr\">features</span> = []</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight toml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Cargo.toml</span><br><span class=\"line\"><span class=\"section\">[package]</span></span><br><span class=\"line\"><span class=\"attr\">name</span> = <span class=\"string\">&quot;escrow&quot;</span></span><br><span class=\"line\"><span class=\"attr\">version</span> = <span class=\"string\">&quot;0.1.0&quot;</span></span><br><span class=\"line\"><span class=\"attr\">edition</span> = <span class=\"string\">&quot;2021&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[features]</span></span><br><span class=\"line\"><span class=\"attr\">no-entrypoint</span> = []</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[dependencies]</span></span><br><span class=\"line\"><span class=\"attr\">arrayref</span> = <span class=\"string\">&quot;0.3.6&quot;</span></span><br><span class=\"line\"><span class=\"attr\">solana-program</span> = <span class=\"string\">&quot;2.0.8&quot;</span></span><br><span class=\"line\"><span class=\"attr\">thiserror</span> = <span class=\"string\">&quot;1.0&quot;</span></span><br><span class=\"line\"><span class=\"attr\">spl-token</span> = &#123;version = <span class=\"string\">&quot;6.0.0&quot;</span>, features = [<span class=\"string\">&quot;no-entrypoint&quot;</span>]&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[lib]</span></span><br><span class=\"line\"><span class=\"attr\">crate-type</span> = [<span class=\"string\">&quot;cdylib&quot;</span>, <span class=\"string\">&quot;lib&quot;</span>]</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ç¬¬ä¸€ä¸ªé¡¹ç›®è¦å­¦ä¹ çš„æ˜¯ä¸€ä¸ªæ‰˜ç®¡åˆçº¦ï¼Œä¸»è¦æ˜¯è§£å†³äº¤æ˜“ä¸­çš„å»ä¿¡ä»»é—®é¢˜ã€‚</li>\n<li>åœ¨åŒºå—é“¾ä¸­ï¼Œæ™ºèƒ½åˆçº¦åŒæ–¹å‡å¯è§ï¼Œå±äºå¤©ç„¶çš„å¯ä¿¡ç¬¬ä¸‰æ–¹ğŸ‘®â€â™‚ï¸ã€‚</li>\n<li>ä¸è¿‡ï¼Œç†è®ºæ˜¯ç†è®ºğŸ¤—solanaå¹¶ä¸å®Œå…¨é€‚ç”¨ï¼Œå› ä¸ºsolanaåˆçº¦æ˜¯å¯ä»¥å‡çº§çš„ï¼Œæœ‰å¯èƒ½ä½ çœ‹åˆ°çš„ä¸ä¸€å®šæ˜¯è¢«éƒ¨ç½²çš„ï¼Œä¸è¿‡è¿™éƒ½ä¸é‡è¦ğŸ¤”æˆ‘ä»¬æš‚æ—¶æ¶‰åŠä¸åˆ°é‚£ä¸ªéƒ¨åˆ†</li>\n</ul>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>åŸºäºæˆ‘ä¸ªäººçš„ç†è§£ï¼Œæ™ºèƒ½åˆçº¦å°±æ˜¯æ‰¿æ‹…ä¸€ç¬”äº¤æ˜“çš„ç¬¬ä¸‰æ–¹æ‹…ä¿ï¼Œç”¨æ¥ä¿è¯ä¸€åœºäº¤æ˜“ä¸­ä¸ä¼šäº§ç”Ÿäº¤æ˜“åŒæ–¹ç”±äºæ— æ³•ä¿¡ä»»å¯¹æ–¹æˆ–è€…ç¼ºå°‘å¯ä¿¡ä»»çš„ç¬¬ä¸‰æ–¹å¯¼è‡´äº¤æ˜“æ— æ³•æ­£å¸¸è¿›è¡Œã€‚æ‰“ä¸ªä¸æ°å½“çš„æ¯”å–»ï¼Œæœ‰ç‚¹åƒæ˜¯é€šè¿‡<code>æ”¯ä»˜å® || å¾®ä¿¡</code>è¿›è¡Œçš„äº¤æ˜“ï¼Œå¤§å®¶éƒ½èƒ½å¤Ÿå®Œå…¨çš„ä¿¡ä»»ï¼Œå°±æ˜¯å› ä¸ºä»–ä»¬åœ¨æˆ‘ä»¬çš„äº¤æ˜“ä¸­æä¾›äº†èµ„é‡‘äº¤æµçš„ä¿è¯ã€‚</p></blockquote>\n<div class=\"custom-quote tip\">\n<span class=\"custom-quote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M20.86 14.13C20 14.7 19.56 15.74 19.77 16.76C20.13 18.55 18.55 20.13 16.76 19.77C15.74 19.57 14.7 20 14.13 20.86C13.12 22.38 10.89 22.38 9.88 20.86C9.3 20 8.26 19.56 7.24 19.77C5.45 20.13 3.87 18.55 4.23 16.76C4.43 15.74 4 14.7 3.14 14.13C1.62 13.12 1.62 10.89 3.14 9.88C4 9.3 4.44 8.26 4.23 7.24C3.87 5.45 5.45 3.87 7.24 4.23C8.26 4.44 9.3 4 9.87 3.14C10.88 1.62 13.11 1.62 14.12 3.14C14.7 4 15.74 4.44 16.76 4.23C18.55 3.87 20.13 5.45 19.77 7.24C19.56 8.26 20 9.3 20.86 9.87C22.38 10.88 22.38 13.12 20.86 14.13Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12.01 15C12.01 14.5 12.01 14.5 12.01 14.5C12.04 13.75 13 13.46 14.04 12.2C14.41 11.74 14.69 11.41 14.86 10.85C15.15 9.95 14.92 9.18 14.86 9.02C14.8 8.79 14.52 8 13.72 7.46C13.06 7.02 12.42 7 12.14 7C11.9 7 11.36 7 10.78 7.3C10.28 7.56 9.98 7.9 9.83 8.1C9.24 8.82 9.06 9.63 9 10.06\"></path>\n<path stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M11.99 18H12.01\"></path>\n</svg></span>\n<p class=\"custom-quote-title\">TIP</p>\n<p>åœ¨SolanaåŒºå—é“¾ä¸­ï¼Œæ™ºèƒ½åˆçº¦æ˜¯æ— çŠ¶æ€çš„ï¼Œä¸èƒ½ä¿å­˜ä»»ä½•æ•°æ®ã€‚æ‰€æœ‰éœ€è¦ä¿å­˜çš„æ•°æ®å‡ä¿å­˜åœ¨è´¦å·çš„<code>data</code>å­—æ®µä¸­ã€‚</p>\n<p>å…³äºSpl-tokenåŠè´¦å·ç›¸å…³çš„ä¸€äº›åŸºç¡€çŸ¥è¯†è¯·è¯»è€…è‡ªè¡Œé˜…è¯»ç›¸åº”æ–‡ç« æˆ–è€…æºæ•™å­¦æ–‡ç« ã€‚</p>\n\n</div>\n<ul>\n<li>åœ¨srcç›®å½•ä¸‹åˆ›å»º<code>error.rs</code> ,<code>instruction.rs</code>, <code>processor.rs</code>,<code>entrypoint.rs</code>,<code>state.rs</code>ç¨åæˆ‘ä»¬å°†åœ¨è¿™äº›æ–‡ä»¶ä¸­æ’°å†™ä»£ç </li>\n</ul>\n<h2 id=\"ç¼–å†™åŸºæœ¬æ¡†æ¶\"><a href=\"#ç¼–å†™åŸºæœ¬æ¡†æ¶\" class=\"headerlink\" title=\"ç¼–å†™åŸºæœ¬æ¡†æ¶\"></a>ç¼–å†™åŸºæœ¬æ¡†æ¶</h2><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>ä¸‹é¢ä¼šå…ˆæ”¾æºç ï¼Œå†æ”¾æˆ‘çš„ä¸ªäººç†è§£ï¼Œåªæƒ³çœ‹ä»£ç çš„å¯ä»¥é€šè¿‡å¤§çº²è¿›è¡Œè·³è½¬ã€‚</p></blockquote>\n<h3 id=\"Error-rs\"><a href=\"#Error-rs\" class=\"headerlink\" title=\"Error.rs\"></a>Error.rs</h3><figure class=\"highlight rust\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">use</span> thiserror::Error;</span><br><span class=\"line\"><span class=\"keyword\">use</span> solana_program::program_error::ProgramError;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#[derive(Error,Debug,Copy,Clone)]</span></span><br><span class=\"line\"><span class=\"keyword\">pub</span> <span class=\"keyword\">enum</span> <span class=\"title class_\">EscrowError</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// Invalid instruction</span></span><br><span class=\"line\">    <span class=\"meta\">#[error(<span class=\"string\">&quot;Invalid Instruction&quot;</span>)]</span></span><br><span class=\"line\">    InvalidInstruction,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">impl</span> <span class=\"title class_\">From</span>&lt;EscrowError&gt; <span class=\"keyword\">for</span> <span class=\"title class_\">ProgramError</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">fn</span> <span class=\"title function_\">from</span>(e: EscrowError) <span class=\"punctuation\">-&gt;</span> <span class=\"keyword\">Self</span> &#123;</span><br><span class=\"line\">        ProgramError::<span class=\"title function_ invoke__\">Custom</span>(e <span class=\"keyword\">as</span> <span class=\"type\">u32</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>è¿™é‡Œä½¿ç”¨<code>thiserror</code>çš„åŸå› åŸæ–‡ä¸­å†™çš„å¾ˆæ˜ç¡®ï¼Œçœå»æˆ‘ä»¬æ‰‹åŠ¨å®ç°ç›¸å…³<em>Trait</em>ã€‚</p></blockquote>\n<ul>\n<li>solanaç¨‹åºçš„è¿”å›å€¼é€šå¸¸ä¸º<code>ProgramError</code>,æ‰€ä»¥æˆ‘ä»¬åœ¨è¿™é‡Œä¸º<code>ProgramError</code>æšä¸¾ä¸­çš„æ‰€æœ‰ç±»å‹å®ç°<code>From</code>Traitè½¬æ¢ä¸º<code>EscrowError</code></li>\n</ul>\n<h3 id=\"instruction-rs\"><a href=\"#instruction-rs\" class=\"headerlink\" title=\"instruction.rs\"></a>instruction.rs</h3><figure class=\"highlight rust\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">use</span> std::convert::TryInto;</span><br><span class=\"line\"><span class=\"keyword\">use</span> crate::error::EscrowError::InvalidInstruction;</span><br><span class=\"line\"><span class=\"keyword\">use</span> solana_program::program_error::ProgramError;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">pub</span> <span class=\"keyword\">enum</span> <span class=\"title class_\">EscrowInstruction</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">/// å› ä¸ºè¦åœ¨åˆå§‹åŒ–é‡Œè½¬ç§»ä¸´æ—¶ä»£å¸è´¦å·æ‰€æœ‰æƒï¼Œæ‰€ä»¥éœ€è¦åŸownerç­¾åï¼Œå¹¶ä¸”åŸownerä¹Ÿæ˜¯åˆå§‹åŒ–è€…</span></span><br><span class=\"line\">    <span class=\"comment\">/// 0. `[signer]` The account of the person initializing the escrow</span></span><br><span class=\"line\">    <span class=\"comment\">/// 1. `[writable]` Temporary token account that should be created prior to this instruction and owned by the initializer</span></span><br><span class=\"line\">    <span class=\"comment\">/// 2. `[]` The initializer&#x27;s token account for the token they will receive should the trade go through</span></span><br><span class=\"line\">    <span class=\"comment\">/// 3. `[writable]` The escrow account, it will hold all necessary info about the trade.</span></span><br><span class=\"line\">    <span class=\"comment\">/// 4. `[]` The rent sysvar</span></span><br><span class=\"line\">    <span class=\"comment\">/// 5. `[]` The token program</span></span><br><span class=\"line\">    InitEscrow &#123;</span><br><span class=\"line\">        <span class=\"comment\">/// The amount party A expects to receive of token Y</span></span><br><span class=\"line\">        amount: <span class=\"type\">u64</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">impl</span> <span class=\"title class_\">EscrowInstruction</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">pub</span> <span class=\"keyword\">fn</span> <span class=\"title function_\">unpack</span>(input: &amp;[<span class=\"type\">u8</span>]) <span class=\"punctuation\">-&gt;</span> <span class=\"type\">Result</span>&lt;<span class=\"keyword\">Self</span>, ProgramError&gt; &#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> (tag, rest) = input.<span class=\"title function_ invoke__\">split_first</span>().<span class=\"title function_ invoke__\">ok_or</span>(InvalidInstruction)?;</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"title function_ invoke__\">Ok</span>(<span class=\"keyword\">match</span> tag &#123;</span><br><span class=\"line\">            <span class=\"number\">0</span> =&gt; <span class=\"keyword\">Self</span>::InitEscrow &#123;</span><br><span class=\"line\">                amount: <span class=\"keyword\">Self</span>::<span class=\"title function_ invoke__\">unpack_amount</span>(rest)?,</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            <span class=\"comment\">//æ³¨æ„è¿™é‡Œçš„ç”¨æ³•ï¼ŒInvalidInstructionè½¬åŒ–ä¸ºProgramErroræ—¶ï¼Œä½¿ç”¨äº†into</span></span><br><span class=\"line\">          \t<span class=\"comment\">//å› ä¸ºæˆ‘ä»¬åœ¨error.rsä¸­å·²ç»å®ç°äº†é‚£ä¸ªfromï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬å®ç°into</span></span><br><span class=\"line\">            _ =&gt; <span class=\"keyword\">return</span> <span class=\"title function_ invoke__\">Err</span>(InvalidInstruction.<span class=\"title function_ invoke__\">into</span>()),</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//è¿™é‡Œå­¦ä¹ Input è½¬åŒ–ä¸ºu64</span></span><br><span class=\"line\">    <span class=\"keyword\">fn</span> <span class=\"title function_\">unpack_amount</span>(input: &amp;[<span class=\"type\">u8</span>]) <span class=\"punctuation\">-&gt;</span> <span class=\"type\">Result</span>&lt;<span class=\"type\">u64</span>, ProgramError&gt; &#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> <span class=\"variable\">amount</span> = input</span><br><span class=\"line\">            .<span class=\"title function_ invoke__\">get</span>(..<span class=\"number\">8</span>)</span><br><span class=\"line\">            .<span class=\"title function_ invoke__\">and_then</span>(|slice| slice.<span class=\"title function_ invoke__\">try_into</span>().<span class=\"title function_ invoke__\">ok</span>())</span><br><span class=\"line\">            .<span class=\"title function_ invoke__\">map</span>(<span class=\"type\">u64</span>::from_le_bytes)</span><br><span class=\"line\">            .<span class=\"title function_ invoke__\">ok_or</span>(InvalidInstruction)?;</span><br><span class=\"line\">        <span class=\"title function_ invoke__\">Ok</span>(amount)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ol>\n<li><p>åœ¨è¿™æ®µä»£ç é‡Œå‡†å¤‡ä¸€ä»½åˆå§‹åŒ–æŒ‡ä»¤ï¼Œç¼–å†™<code>unpack</code>å‡½æ•°ç”¨æ¥å°†è¾“å…¥æ•°æ®è§£æä¸ºä¸€ä¸ªæŒ‡ä»¤</p>\n</li>\n<li><p>åç»­æ·»åŠ æ–°çš„æŒ‡ä»¤ç»§ç»­åœ¨<code>unpack</code>å‡½æ•°ä¸­æ·»åŠ å†…å®¹å³å¯ã€‚æ³¨æ„å‡½æ•°è¿”å›ç±»å‹<code>Result&lt;Self, ProgramError&gt;</code></p>\n</li>\n<li><p>ç”±äºinputæ˜¯<code>&amp;[u8]</code>ç±»å‹ï¼Œæˆ‘ä»¬åœ¨åˆå§‹åŒ–ä»£å¸æ‰€æœ‰æƒä¸­ä½¿ç”¨äº†<code>amount: u64</code>,æ‰€ä»¥æˆ‘ä»¬éœ€è¦ç¼–å†™ä¸€ä¸ªç±»å‹è½¬æ¢ï¼Œä»inputä¸­åˆ‡å–ä»£è¡¨<code>amount</code>çš„éƒ¨åˆ†ã€‚</p>\n<ul>\n<li>æ•´ä¸ªè¿‡ç¨‹çš„ç›®çš„æ˜¯å°è¯•ä» <code>input</code> çš„å‰ 8 ä¸ªå­—èŠ‚ä¸­è¯»å–ä¸€ä¸ª <code>u64</code> å€¼ï¼š<ol>\n<li><strong>è·å–å‰ 8 ä¸ªå­—èŠ‚</strong>ï¼šé€šè¿‡ <code>input.get(..8)</code> å°è¯•è·å–åˆ‡ç‰‡çš„å‰ 8 ä¸ªå­—èŠ‚ã€‚</li>\n<li><strong>è½¬æ¢åˆ‡ç‰‡åˆ°æ•°ç»„</strong>ï¼šä½¿ç”¨ <code>.and_then</code> å’Œ <code>try_into()</code> å°†å­—èŠ‚åˆ‡ç‰‡è½¬æ¢ä¸ºä¸€ä¸ªå›ºå®šå¤§å°çš„å­—èŠ‚æ•°ç»„ <code>[u8; 8]</code>ã€‚</li>\n<li>**è½¬æ¢å­—èŠ‚æ•°ç»„åˆ° <code>u64</code>**ï¼šä½¿ç”¨ <code>map(u64::from_le_bytes)</code> å°† <code>[u8; 8]</code> è½¬æ¢ä¸º <code>u64</code>ã€‚</li>\n<li><strong>é”™è¯¯å¤„ç†</strong>ï¼šå¦‚æœä»»ä½•ä¸€æ­¥å¤±è´¥ï¼Œè¿”å› <code>InvalidInstruction</code> é”™è¯¯ã€‚</li>\n</ol>\n</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"processor-rs\"><a href=\"#processor-rs\" class=\"headerlink\" title=\"processor.rs\"></a>processor.rs</h3><figure class=\"highlight rust\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">use</span> solana_program::&#123;</span><br><span class=\"line\">    account_info::&#123;next_account_info,AccountInfo&#125;,</span><br><span class=\"line\">    entrypoint::ProgramResult,</span><br><span class=\"line\">    program_error::ProgramError,</span><br><span class=\"line\">    msg,</span><br><span class=\"line\">    pubkey::Pubkey,</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">use</span> crate::instruction::EscrowInstruction;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">pub</span> <span class=\"keyword\">struct</span> <span class=\"title class_\">Processor</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">impl</span> <span class=\"title class_\">Processor</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">pub</span> <span class=\"keyword\">fn</span> <span class=\"title function_\">process</span>(program_id: &amp;Pubkey, accounts: &amp;[AccountInfo], instruction_data: &amp;[<span class=\"type\">u8</span>]) <span class=\"punctuation\">-&gt;</span> ProgramResult &#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> <span class=\"variable\">instruction</span> = EscrowInstruction::<span class=\"title function_ invoke__\">unpack</span>(instruction_data)?;</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">match</span> instruction &#123;</span><br><span class=\"line\">            EscrowInstruction::InitEscrow &#123;amount&#125; =&gt; &#123;</span><br><span class=\"line\">                msg!(<span class=\"string\">&quot;Instruction: InitEscrow&quot;</span>);</span><br><span class=\"line\">                <span class=\"keyword\">Self</span>::<span class=\"title function_ invoke__\">process_init_escrow</span>(accounts,amount,program_id)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">fn</span> <span class=\"title function_\">process_init_escrow</span>(</span><br><span class=\"line\">        accounts: &amp;[AccountInfo],</span><br><span class=\"line\">        amount: <span class=\"type\">u64</span>,</span><br><span class=\"line\">        program_id: &amp;Pubkey</span><br><span class=\"line\">    ) <span class=\"punctuation\">-&gt;</span> ProgramResult &#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> <span class=\"variable\">account_info_iter</span> = &amp;<span class=\"keyword\">mut</span> accounts.<span class=\"title function_ invoke__\">iter</span>();</span><br><span class=\"line\">        <span class=\"keyword\">let</span> <span class=\"variable\">initializer</span> = <span class=\"title function_ invoke__\">next_account_info</span>(account_info_iter)?;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> !initializer.is_signer &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"title function_ invoke__\">Err</span>(ProgramError::MissingRequiredSignature);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">// todo</span></span><br><span class=\"line\">        <span class=\"title function_ invoke__\">Ok</span>(())</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<div class=\"custom-quote tip\">\n<span class=\"custom-quote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M20.86 14.13C20 14.7 19.56 15.74 19.77 16.76C20.13 18.55 18.55 20.13 16.76 19.77C15.74 19.57 14.7 20 14.13 20.86C13.12 22.38 10.89 22.38 9.88 20.86C9.3 20 8.26 19.56 7.24 19.77C5.45 20.13 3.87 18.55 4.23 16.76C4.43 15.74 4 14.7 3.14 14.13C1.62 13.12 1.62 10.89 3.14 9.88C4 9.3 4.44 8.26 4.23 7.24C3.87 5.45 5.45 3.87 7.24 4.23C8.26 4.44 9.3 4 9.87 3.14C10.88 1.62 13.11 1.62 14.12 3.14C14.7 4 15.74 4.44 16.76 4.23C18.55 3.87 20.13 5.45 19.77 7.24C19.56 8.26 20 9.3 20.86 9.87C22.38 10.88 22.38 13.12 20.86 14.13Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12.01 15C12.01 14.5 12.01 14.5 12.01 14.5C12.04 13.75 13 13.46 14.04 12.2C14.41 11.74 14.69 11.41 14.86 10.85C15.15 9.95 14.92 9.18 14.86 9.02C14.8 8.79 14.52 8 13.72 7.46C13.06 7.02 12.42 7 12.14 7C11.9 7 11.36 7 10.78 7.3C10.28 7.56 9.98 7.9 9.83 8.1C9.24 8.82 9.06 9.63 9 10.06\"></path>\n<path stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M11.99 18H12.01\"></path>\n</svg></span>\n<p class=\"custom-quote-title\">TIP</p>\n<p><ul>\n<li>è¿™é‡Œä¸€èˆ¬ä¸ºå›ºå®šçš„<code>Processor</code>ç»“æ„ä½“ï¼ˆåªæ˜¯çº¦å®šï¼Œæ— å¼ºåˆ¶åŠ›ï¼‰ã€‚åœ¨è¯¥ç»“æ„ä½“ä¸Šåˆ›å»ºä¸€ä¸ªé™æ€å‡½æ•°<code>process</code>æ¥å¤„ç†å…¥å£è½¬å‘è¿‡æ¥çš„å‚æ•°ã€‚åœ¨è¯¥å‡½æ•°å†…éƒ¨ï¼Œé¦–å…ˆè§£ææŒ‡ä»¤ï¼Œç„¶åæ ¹æ®æŒ‡ä»¤è°ƒç”¨ç›¸åº”çš„å¤„ç†å‡½æ•°ã€‚<ul>\n<li><code>processor</code>è¿”å›çš„æ˜¯<code>ProgramResult</code>ã€‚</li>\n<li>å‡½æ•°ä½“ä¸­<code>?</code>æ“ä½œç¬¦çš„ä½¿ç”¨ï¼Œå‘ä¸Šçº§è°ƒç”¨ä¼ é€’é”™è¯¯ã€‚</li>\n</ul>\n</li>\n<li><code>process_init_escrow</code>å¹¶æ²¡æœ‰å®Œå…¨ç¼–å†™ğŸ¤—åç»­ä¼šè¿›è¡Œç¼–å†™</li>\n</ul>\n</p>\n</div>\n<h3 id=\"entrypoint-rs\"><a href=\"#entrypoint-rs\" class=\"headerlink\" title=\"entrypoint.rs\"></a>entrypoint.rs</h3><figure class=\"highlight rust\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//! Program entrypoint</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">use</span> crate::&#123;processor::Processor&#125;;</span><br><span class=\"line\"><span class=\"keyword\">use</span> solana_program::&#123;</span><br><span class=\"line\">    account_info::AccountInfo, </span><br><span class=\"line\">    entrypoint, </span><br><span class=\"line\">    entrypoint::ProgramResult,</span><br><span class=\"line\">    pubkey::Pubkey,</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">entrypoint!(process_instruction);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">fn</span> <span class=\"title function_\">process_instruction</span>(</span><br><span class=\"line\">    program_id: &amp;Pubkey,</span><br><span class=\"line\">    accounts: &amp;[AccountInfo],</span><br><span class=\"line\">    instruction_data: &amp;[<span class=\"type\">u8</span>],</span><br><span class=\"line\">) <span class=\"punctuation\">-&gt;</span> ProgramResult &#123;</span><br><span class=\"line\">    Processor::<span class=\"title function_ invoke__\">process</span>(program_id, accounts, instruction_data) </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>è¿™éƒ¨åˆ†åœ¨<em>lib.rs</em>ä¸­å£°æ˜<code>mod</code>çš„æ—¶å€™ï¼Œéœ€è¦è®¾å®šå¯å…³é—­<code>entrypoint</code>ç‰¹æ€§ï¼Œä¸ºäº†ç¨‹åºå¯ä»¥æ–¹ä¾¿çš„è¢«å…¶ä»–ç¨‹åºå¯¼å…¥ï¼ˆè¿™é‡ŒåŸæ–‡ä¸­ä¹Ÿåªæ˜¯æŒ‡å‡ºäº†æ–¹æ³•ï¼Œæ˜¯å‚è€ƒspl-tokenä¸­çš„è®¾ç½®å’Œç¼–å†™è€Œæ¥çš„ï¼‰<a href=\"lib.rs%E4%B8%AD%E7%9A%84%E5%85%B7%E4%BD%93%E4%BB%A3%E7%A0%81%E4%BC%9A%E5%9C%A8%E5%90%8E%E9%9D%A2%E7%BB%9F%E4%B8%80%E5%B1%95%E7%A4%BA\">^2</a></p>\n</li>\n<li><p>è¿™æ®µä»£ç æ˜¯solanaçš„å…¥å£ç‚¹å®ç°ä»£ç ã€‚è´Ÿè´£æ¥æ”¶å’Œå¤„ç†æ¥è‡ªå®¢æˆ·ç«¯çš„äº¤æ˜“è¯·æ±‚ã€‚å…¥å£ç‚¹å‡½æ•°å®šä¹‰äº†å¦‚ä½•å¤„ç†æŒ‡ä»¤æ•°æ®ã€è´¦æˆ·ä¿¡æ¯ä»¥åŠç¨‹åºID</p>\n</li>\n<li><p><code>entrypoint!</code> æ˜¯ä¸€ä¸ªå®ï¼Œç”¨äºå®šä¹‰Solanaç¨‹åºçš„å…¥å£ç‚¹å‡½æ•°ã€‚åœ¨Solanaä¸­ï¼Œæ¯ä¸ªç¨‹åºå¿…é¡»æœ‰ä¸”åªèƒ½æœ‰ä¸€ä¸ªå…¥å£ç‚¹å‡½æ•°ã€‚</p>\n<ul>\n<li><code>entrypoint!(process_instruction)</code> å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œ<code>process_instruction</code> å‡½æ•°æ˜¯è¯¥ç¨‹åºçš„å…¥å£ç‚¹å‡½æ•°ã€‚Solanaè¿è¡Œæ—¶ä¼šåœ¨æ¯æ¬¡ç¨‹åºè¢«è°ƒç”¨æ—¶æ‰§è¡Œè¿™ä¸ªå‡½æ•°ã€‚</li>\n</ul>\n</li>\n<li><p><code>fn process_instruction</code>:</p>\n<ul>\n<li><code>program_id: &amp;Pubkey</code>: è¡¨ç¤ºå½“å‰æ­£åœ¨æ‰§è¡Œçš„ç¨‹åºçš„å…¬é’¥ã€‚è¿™æ˜¯Solanaç”¨æ¥éªŒè¯è¿™ä¸ªç¨‹åºçš„æ ‡è¯†ç¬¦ã€‚</li>\n<li><code>accounts: &amp;[AccountInfo]</code>: ä¸€ä¸ªè´¦æˆ·ä¿¡æ¯çš„åˆ‡ç‰‡ï¼ŒåŒ…å«äº†æ‰€æœ‰åœ¨è¿™ä¸ªäº¤æ˜“ä¸­æ¶‰åŠçš„è´¦æˆ·ã€‚æ¯ä¸ª <code>AccountInfo</code> åŒ…å«å…³äºè´¦æˆ·çš„è¯¦ç»†ä¿¡æ¯ï¼Œä¾‹å¦‚å…¬é’¥ã€ä½™é¢ã€æ‰€æœ‰è€…å’Œæ•°æ®ã€‚</li>\n<li><code>instruction_data: &amp;[u8]</code>: ä¸€ä¸ªå­—èŠ‚æ•°ç»„ï¼ŒåŒ…å«äº†å®¢æˆ·ç«¯ä¼ é€’ç»™ç¨‹åºçš„æŒ‡ä»¤æ•°æ®ã€‚è¿™ä¸ªæ•°æ®é€šå¸¸åŒ…å«æ“ä½œç å’Œç›¸å…³çš„å‚æ•°ï¼ŒæŒ‡ç¤ºç¨‹åºåº”è¯¥æ‰§è¡Œä»€ä¹ˆæ“ä½œã€‚</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"state-rs\"><a href=\"#state-rs\" class=\"headerlink\" title=\"state.rs\"></a>state.rs</h3><figure class=\"highlight rust\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">use</span> solana_program::&#123;</span><br><span class=\"line\">    program_pack::&#123;IsInitialized, Pack, Sealed&#125;,</span><br><span class=\"line\">    program_error::ProgramError,</span><br><span class=\"line\">    pubkey::Pubkey,</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">pub</span> <span class=\"keyword\">struct</span> <span class=\"title class_\">Escrow</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">pub</span> is_initialized: <span class=\"type\">bool</span>,</span><br><span class=\"line\">    <span class=\"keyword\">pub</span> initializer_pubkey: Pubkey,</span><br><span class=\"line\">    <span class=\"keyword\">pub</span> temp_token_account_pubkey: Pubkey,</span><br><span class=\"line\">    <span class=\"keyword\">pub</span> initializer_token_to_receive_account_pubkey: Pubkey,</span><br><span class=\"line\">    <span class=\"keyword\">pub</span> expected_amount: <span class=\"type\">u64</span>,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">impl</span> <span class=\"title class_\">Sealed</span> <span class=\"keyword\">for</span> <span class=\"title class_\">Escrow</span> &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">impl</span> <span class=\"title class_\">IsInitialized</span> <span class=\"keyword\">for</span> <span class=\"title class_\">Escrow</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">fn</span> <span class=\"title function_\">is_initialized</span>(&amp;<span class=\"keyword\">self</span>) <span class=\"punctuation\">-&gt;</span> <span class=\"type\">bool</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">self</span>.is_initialized</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">use</span> arrayref::&#123;array_mut_ref, array_ref, array_refs, mut_array_refs&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">impl</span> <span class=\"title class_\">Pack</span> <span class=\"keyword\">for</span> <span class=\"title class_\">Escrow</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> LEN: <span class=\"type\">usize</span> = <span class=\"number\">105</span>;</span><br><span class=\"line\">    <span class=\"keyword\">fn</span> <span class=\"title function_\">unpack_from_slice</span>(src: &amp;[<span class=\"type\">u8</span>]) <span class=\"punctuation\">-&gt;</span> <span class=\"type\">Result</span>&lt;<span class=\"keyword\">Self</span>, ProgramError&gt; &#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> <span class=\"variable\">src</span> = array_ref![src, <span class=\"number\">0</span>, Escrow::LEN];</span><br><span class=\"line\">        <span class=\"keyword\">let</span> (</span><br><span class=\"line\">            is_initialized,</span><br><span class=\"line\">            initializer_pubkey,</span><br><span class=\"line\">            temp_token_account_pubkey,</span><br><span class=\"line\">            initializer_token_to_receive_account_pubkey,</span><br><span class=\"line\">            expected_amount,</span><br><span class=\"line\">        ) = array_refs![src, <span class=\"number\">1</span>, <span class=\"number\">32</span>, <span class=\"number\">32</span>, <span class=\"number\">32</span>, <span class=\"number\">8</span>];</span><br><span class=\"line\">        <span class=\"keyword\">let</span> <span class=\"variable\">is_initialized</span> = <span class=\"keyword\">match</span> is_initialized &#123;</span><br><span class=\"line\">            [<span class=\"number\">0</span>] =&gt; <span class=\"literal\">false</span>,</span><br><span class=\"line\">            [<span class=\"number\">1</span>] =&gt; <span class=\"literal\">true</span>,</span><br><span class=\"line\">            _ =&gt; <span class=\"keyword\">return</span> <span class=\"title function_ invoke__\">Err</span>(ProgramError::InvalidAccountData),</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title function_ invoke__\">Ok</span>(Escrow &#123;</span><br><span class=\"line\">            is_initialized,</span><br><span class=\"line\">            initializer_pubkey: Pubkey::<span class=\"title function_ invoke__\">new_from_array</span>(*initializer_pubkey),</span><br><span class=\"line\">            temp_token_account_pubkey: Pubkey::<span class=\"title function_ invoke__\">new_from_array</span>(*temp_token_account_pubkey),</span><br><span class=\"line\">            initializer_token_to_receive_account_pubkey: Pubkey::<span class=\"title function_ invoke__\">new_from_array</span>(*initializer_token_to_receive_account_pubkey),</span><br><span class=\"line\">            expected_amount: <span class=\"type\">u64</span>::<span class=\"title function_ invoke__\">from_le_bytes</span>(*expected_amount),</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">fn</span> <span class=\"title function_\">pack_into_slice</span>(&amp;<span class=\"keyword\">self</span>, dst: &amp;<span class=\"keyword\">mut</span> [<span class=\"type\">u8</span>]) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> <span class=\"variable\">dst</span> = array_mut_ref![dst, <span class=\"number\">0</span>, Escrow::LEN];</span><br><span class=\"line\">        <span class=\"keyword\">let</span> (</span><br><span class=\"line\">            is_initialized_dst,</span><br><span class=\"line\">            initializer_pubkey_dst,</span><br><span class=\"line\">            temp_token_account_pubkey_dst,</span><br><span class=\"line\">            initializer_token_to_receive_account_pubkey_dst,</span><br><span class=\"line\">            expected_amount_dst,</span><br><span class=\"line\">        ) = mut_array_refs![dst, <span class=\"number\">1</span>, <span class=\"number\">32</span>, <span class=\"number\">32</span>, <span class=\"number\">32</span>, <span class=\"number\">8</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">let</span> <span class=\"variable\">Escrow</span> &#123;</span><br><span class=\"line\">            is_initialized,</span><br><span class=\"line\">            initializer_pubkey,</span><br><span class=\"line\">            temp_token_account_pubkey,</span><br><span class=\"line\">            initializer_token_to_receive_account_pubkey,</span><br><span class=\"line\">            expected_amount,</span><br><span class=\"line\">        &#125; = <span class=\"keyword\">self</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        is_initialized_dst[<span class=\"number\">0</span>] = *is_initialized <span class=\"keyword\">as</span> <span class=\"type\">u8</span>;</span><br><span class=\"line\">        initializer_pubkey_dst.<span class=\"title function_ invoke__\">copy_from_slice</span>(initializer_pubkey.<span class=\"title function_ invoke__\">as_ref</span>());</span><br><span class=\"line\">        temp_token_account_pubkey_dst.<span class=\"title function_ invoke__\">copy_from_slice</span>(temp_token_account_pubkey.<span class=\"title function_ invoke__\">as_ref</span>());</span><br><span class=\"line\">        initializer_token_to_receive_account_pubkey_dst.<span class=\"title function_ invoke__\">copy_from_slice</span>(initializer_token_to_receive_account_pubkey.<span class=\"title function_ invoke__\">as_ref</span>());</span><br><span class=\"line\">        *expected_amount_dst = expected_amount.<span class=\"title function_ invoke__\">to_le_bytes</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<div class=\"custom-quote tip\">\n<span class=\"custom-quote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M20.86 14.13C20 14.7 19.56 15.74 19.77 16.76C20.13 18.55 18.55 20.13 16.76 19.77C15.74 19.57 14.7 20 14.13 20.86C13.12 22.38 10.89 22.38 9.88 20.86C9.3 20 8.26 19.56 7.24 19.77C5.45 20.13 3.87 18.55 4.23 16.76C4.43 15.74 4 14.7 3.14 14.13C1.62 13.12 1.62 10.89 3.14 9.88C4 9.3 4.44 8.26 4.23 7.24C3.87 5.45 5.45 3.87 7.24 4.23C8.26 4.44 9.3 4 9.87 3.14C10.88 1.62 13.11 1.62 14.12 3.14C14.7 4 15.74 4.44 16.76 4.23C18.55 3.87 20.13 5.45 19.77 7.24C19.56 8.26 20 9.3 20.86 9.87C22.38 10.88 22.38 13.12 20.86 14.13Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12.01 15C12.01 14.5 12.01 14.5 12.01 14.5C12.04 13.75 13 13.46 14.04 12.2C14.41 11.74 14.69 11.41 14.86 10.85C15.15 9.95 14.92 9.18 14.86 9.02C14.8 8.79 14.52 8 13.72 7.46C13.06 7.02 12.42 7 12.14 7C11.9 7 11.36 7 10.78 7.3C10.28 7.56 9.98 7.9 9.83 8.1C9.24 8.82 9.06 9.63 9 10.06\"></path>\n<path stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M11.99 18H12.01\"></path>\n</svg></span>\n<p class=\"custom-quote-title\">TIP</p>\n<ul>\n<li>ç›¸åŒç›®å½•åˆ›å»º<code>state.rs</code>ï¼Œæ–‡ä»¶ç”¨æ¥å®šä¹‰çŠ¶æ€ä¿å­˜å¯¹è±¡å¹¶ç¼–å†™ç›¸åº”çš„ç¨‹åºå¤„ç†åºåˆ—åŒ–å’Œååºåˆ—åŒ–<a href=\"%E5%9B%A0%E4%B8%BA%E6%95%B0%E6%8D%AE%E9%9C%80%E8%A6%81%E4%BB%8E%E5%8C%BA%E5%9D%97%E9%93%BE%E8%B4%A6%E6%88%B7%E7%9A%84%E5%AD%97%E8%8A%82%E6%95%B0%E7%BB%84%E6%A0%BC%E5%BC%8F%E4%B8%AD%E8%AF%BB%E5%8F%96%E5%92%8C%E5%86%99%E5%85%A5\">^3</a>ï¼ˆä¹Ÿå°±æ˜¯å°†å­—èŠ‚æ•°ç»„å’Œæ•°æ®ç»“æ„ç›¸äº’è½¬æ¢ï¼‰</li>\n<li>æˆ‘ä»¬çš„ç»“æ„éœ€è¦å®ç°<code>program_pack::&#123;IsInitialized, Pack, Sealed&#125; </code>è¿™ä¸‰ä¸ªç‰¹å‹ã€‚</li>\n<li><code>const LEN: usize = 105;</code>è¿™é‡Œç»“æ„çš„å¤§å°æ˜¯æ ¹æ®å„ä¸ªå­—æ®µçš„å¤§å°ç›¸åŠ å¾—åˆ°çš„ï¼Œåˆ†åˆ«ä¸º<code>1 + 32*3 + 8 = 105</code>ã€‚</li>\n<li><code>unpack_from_slice</code>ä¸<code>pack_into_slice</code>å¹¶ä¸æ˜¯ç›´æ¥è¢«ç¨‹åºçš„å…¶å®ƒéƒ¨åˆ†è°ƒç”¨çš„ï¼ŒPackç‰¹å‹æœ‰ä¸¤ä¸ªé»˜è®¤å‡½æ•°ï¼Œåˆ†åˆ«è°ƒç”¨è¿™ä¸¤ä¸ªå‡½æ•°ã€‚</li>\n<li>æ³¨æ„<code>array_mut_ref</code>, <code>array_ref</code>, <code>array_refs</code>, <code>mut_array_refs</code>è¿™å‡ ä¸ªå®çš„ç”¨æ³•ï¼Œçœ‹åå­—å°±èƒ½çŒœåˆ°ï¼Œåˆ†åˆ«ä¸ºå¾—åˆ°ä¸€ä¸ªæ•°ç»„çš„å¯å˜å¼•ç”¨ï¼Œå¾—åˆ°ä¸€ä¸ªæ•°ç»„çš„å¼•ç”¨ ï¼Œå¾—åˆ°å¤šä¸ªæ•°ç»„çš„å¼•ç”¨ï¼Œå¾—åˆ°å¤šä¸ªæ•°ç»„çš„å¯å˜å¼•ç”¨ã€‚</li>\n<li>æ³¨æ„ç¤ºä¾‹ä¸­ä»å­—èŠ‚æ•°ç»„å¾—åˆ°å…¬é’¥çš„æ–¹æ³•<code>copy_from_slice</code></li>\n<li>ç¤ºä¾‹ä¸­ä»å­—èŠ‚æ•°ç»„å¾—åˆ°<code>u64</code>é‡‡ç”¨äº†<code>to_le_bytes</code>å·¦å¯¹é½çš„æ–¹å¼ï¼ŒRustä¸­è¿˜æœ‰ç±»ä¼¼çš„å³å¯¹é½æ–¹å¼ã€‚ä½†ä¸€èˆ¬Solanaä¸­é‡‡ç”¨ç±»Cçš„å·¦å¯¹é½æ–¹å¼ã€‚</li>\n<li>å¸ƒå°”å€¼å¯ä»¥ç›´æ¥è½¬æ¢ä¸º<code>u8</code>ï¼Œè§<code>is_initialized as u8</code>ã€‚</li>\n</ul>\n\n</div>\n<ul>\n<li><code>Pack</code>Trait<ul>\n<li><code>LEN</code>: å®šä¹‰äº†<code>Escrow</code>ç»“æ„ä½“çš„å­—èŠ‚å¤§å°ï¼ˆ1 + 32 + 32 + 32 + 8 &#x3D; 105 å­—èŠ‚ï¼‰</li>\n</ul>\n</li>\n<li><code>unpack_from_slice</code>:<ul>\n<li>ä»å­—èŠ‚åˆ‡ç‰‡ä¸­é‡å»ºEscrowç»“æ„ä½“ï¼ˆä½ å¯ä»¥ç†è§£ä¸ºï¼Œé€šä¿¡æ—¶ä½¿ç”¨çš„æ˜¯å­—èŠ‚æµï¼Œå­—èŠ‚æµéœ€è¦é‡å»ºä¸ºç»“æ„ä½“æ‰èƒ½è¢«ä½¿ç”¨ï¼‰</li>\n<li>ä½¿ç”¨<code>array_refs!</code>å®å°†æºå­—èŠ‚åˆ‡ç‰‡åˆ†å‰²ä¸ºäº”ä¸ªéƒ¨åˆ†ï¼Œå¹¶ä¸”æ˜ å°„åˆ°<code>Escrow</code>ç»“æ„ä½“</li>\n<li>æ¨¡å¼åŒ¹é…è½¬æ¢<code>is_initialized</code></li>\n<li>å…¶ä»–å­—æ®µå‡é€šè¿‡è½¬æ¢æˆ–è€…å­—èŠ‚æ•°ç»„ä¸­æ„é€ å¾—åˆ°</li>\n</ul>\n</li>\n<li><code>pack_into_slice</code>:<ul>\n<li>å°†<code>Escrow</code>ç»“æ„ä½“çš„å†…å®¹æ‰“åŒ…å›ä¸€ä¸ªå­—èŠ‚åˆ‡ç‰‡</li>\n<li>ä½¿ç”¨<code>mut_array_refs!</code>å®å°†ç›®æ ‡åˆ‡ç‰‡åˆ†å‰²ä¸ºäº”ä¸ªå¯å˜éƒ¨åˆ†</li>\n<li>å°†ç»“æ„ä½“çš„å­—æ®µè½¬æ¢ä¸ºå­—èŠ‚å¹¶å¤åˆ¶åˆ°ç›¸åº”çš„åˆ‡ç‰‡éƒ¨åˆ†</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"lib-rs\"><a href=\"#lib-rs\" class=\"headerlink\" title=\"lib.rs\"></a>lib.rs</h3><figure class=\"highlight rust\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#[cfg(not(feature = <span class=\"string\">&quot;no-entrypoint&quot;</span>))]</span></span><br><span class=\"line\"><span class=\"keyword\">mod</span> entrypoint;</span><br><span class=\"line\"><span class=\"keyword\">pub</span> <span class=\"keyword\">mod</span> error;</span><br><span class=\"line\"><span class=\"keyword\">pub</span> <span class=\"keyword\">mod</span> instruction;</span><br><span class=\"line\"><span class=\"keyword\">pub</span> <span class=\"keyword\">mod</span> processor;</span><br><span class=\"line\"><span class=\"keyword\">pub</span> <span class=\"keyword\">mod</span> state;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å®Œå–„-processor-rs\"><a href=\"#å®Œå–„-processor-rs\" class=\"headerlink\" title=\"å®Œå–„ processor.rs\"></a>å®Œå–„ processor.rs</h3><figure class=\"highlight rust\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">fn</span> <span class=\"title function_\">process_init_escrow</span>(accounts: &amp;[AccountInfo], amount: <span class=\"type\">u64</span>, program_id: &amp;Pubkey) <span class=\"punctuation\">-&gt;</span> ProgramResult &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> <span class=\"variable\">account_info_iter</span> = &amp;<span class=\"keyword\">mut</span> accounts.<span class=\"title function_ invoke__\">iter</span>();</span><br><span class=\"line\">    <span class=\"keyword\">let</span> <span class=\"variable\">initializer</span> = <span class=\"title function_ invoke__\">next_account_info</span>(account_info_iter)?;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> !initializer.is_signer &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"title function_ invoke__\">Err</span>(ProgramError::MissingRequiredSignature);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">let</span> <span class=\"variable\">temp_token_account</span> = <span class=\"title function_ invoke__\">next_account_info</span>(account_info_iter)?;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">let</span> <span class=\"variable\">token_to_receive_account</span> = <span class=\"title function_ invoke__\">next_account_info</span>(account_info_iter)?;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> *token_to_receive_account.owner != spl_token::<span class=\"title function_ invoke__\">id</span>() &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"title function_ invoke__\">Err</span>(ProgramError::IncorrectProgramId);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">let</span> <span class=\"variable\">escrow_account</span> = <span class=\"title function_ invoke__\">next_account_info</span>(account_info_iter)?;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> <span class=\"variable\">rent</span> = &amp;Rent::<span class=\"title function_ invoke__\">from_account_info</span>(<span class=\"title function_ invoke__\">next_account_info</span>(account_info_iter)?)?;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> !rent.<span class=\"title function_ invoke__\">is_exempt</span>(escrow_account.<span class=\"title function_ invoke__\">lamports</span>(), escrow_account.<span class=\"title function_ invoke__\">data_len</span>()) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"title function_ invoke__\">Err</span>(EscrowError::NotRentExempt.<span class=\"title function_ invoke__\">into</span>());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">let</span> <span class=\"keyword\">mut </span><span class=\"variable\">escrow_info</span> = Escrow::<span class=\"title function_ invoke__\">unpack_unchecked</span>(&amp;escrow_account.data.<span class=\"title function_ invoke__\">borrow</span>())?;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> escrow_info.<span class=\"title function_ invoke__\">is_initialized</span>() &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"title function_ invoke__\">Err</span>(ProgramError::AccountAlreadyInitialized);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    escrow_info.is_initialized = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    escrow_info.initializer_pubkey = *initializer.key;</span><br><span class=\"line\">    escrow_info.temp_token_account_pubkey = *temp_token_account.key;</span><br><span class=\"line\">    escrow_info.initializer_token_to_receive_account_pubkey = *token_to_receive_account.key;</span><br><span class=\"line\">    escrow_info.expected_amount = amount;</span><br><span class=\"line\"></span><br><span class=\"line\">    Escrow::<span class=\"title function_ invoke__\">pack</span>(escrow_info, &amp;<span class=\"keyword\">mut</span> escrow_account.<span class=\"title function_ invoke__\">try_borrow_mut_data</span>()?)?;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> (pda, _bump_seed) = Pubkey::<span class=\"title function_ invoke__\">find_program_address</span>(&amp;[<span class=\"string\">b&quot;escrow&quot;</span>], program_id);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">let</span> <span class=\"variable\">token_program</span> = <span class=\"title function_ invoke__\">next_account_info</span>(account_info_iter)?;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> <span class=\"variable\">owner_change_ix</span> = spl_token::instruction::<span class=\"title function_ invoke__\">set_authority</span>(</span><br><span class=\"line\">        token_program.key,</span><br><span class=\"line\">        temp_token_account.key,</span><br><span class=\"line\">        <span class=\"title function_ invoke__\">Some</span>(&amp;pda),</span><br><span class=\"line\">        spl_token::instruction::AuthorityType::AccountOwner,</span><br><span class=\"line\">        initializer.key,</span><br><span class=\"line\">        &amp;[]</span><br><span class=\"line\">    )?;</span><br><span class=\"line\"></span><br><span class=\"line\">    msg!(<span class=\"string\">&quot;Calling the token program to transfer token account ownership...&quot;</span>);</span><br><span class=\"line\">    <span class=\"title function_ invoke__\">invoke</span>(</span><br><span class=\"line\">        &amp;owner_change_ix,</span><br><span class=\"line\">        &amp;[</span><br><span class=\"line\">            temp_token_account.<span class=\"title function_ invoke__\">clone</span>(),</span><br><span class=\"line\">            initializer.<span class=\"title function_ invoke__\">clone</span>(),</span><br><span class=\"line\">            token_program.<span class=\"title function_ invoke__\">clone</span>()</span><br><span class=\"line\">        ]</span><br><span class=\"line\">    )?;</span><br><span class=\"line\">    <span class=\"title function_ invoke__\">Ok</span>(())</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ol>\n<li><p>ä¿®æ”¹<code>use crate::instruction::EscrowInstruction;</code>ä¸º<code>use crate::&#123;instruction::EscrowInstruction, error::EscrowError, state::Escrow&#125;;</code></p>\n</li>\n<li><div class=\"language-rust\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">rust</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #F78C6C\">use</span><span style=\"color: #FFCB6B\"> solana_program</span><span style=\"color: #89DDFF\">::&#123;</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">    account_info</span><span style=\"color: #89DDFF\">::&#123;</span><span style=\"color: #FFCB6B\">next_account_info</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #FFCB6B\"> AccountInfo</span><span style=\"color: #89DDFF\">&#125;,</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">    entrypoint</span><span style=\"color: #89DDFF\">::</span><span style=\"color: #FFCB6B\">ProgramResult</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">    program_error</span><span style=\"color: #89DDFF\">::</span><span style=\"color: #FFCB6B\">ProgramError</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">    msg</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">    pubkey</span><span style=\"color: #89DDFF\">::</span><span style=\"color: #FFCB6B\">Pubkey</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">    program_pack</span><span style=\"color: #89DDFF\">::&#123;</span><span style=\"color: #FFCB6B\">Pack</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #FFCB6B\"> IsInitialized</span><span style=\"color: #89DDFF\">&#125;,</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">    sysvar</span><span style=\"color: #89DDFF\">::&#123;</span><span style=\"color: #FFCB6B\">rent</span><span style=\"color: #89DDFF\">::</span><span style=\"color: #FFCB6B\">Rent</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #FFCB6B\"> Sysvar</span><span style=\"color: #89DDFF\">&#125;,</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">    program</span><span style=\"color: #89DDFF\">::</span><span style=\"color: #FFCB6B\">invoke</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;!--</span><span style=\"color: #BABED8\">codeï¿¼</span><span style=\"color: #F78C6C\">11</span><span style=\"color: #89DDFF\">--&gt;</span></span></code></pre></div></li>\n</ol>\n<ul>\n<li><code>processor.rs</code>éœ€è¦è½¬ä»£å¸è´¦å·æ‰€æœ‰æƒï¼Œè°ƒç”¨<code>spl-token</code>çš„ç›¸å…³å‡½æ•°ç”ŸæˆæŒ‡ä»¤</li>\n<li>ä¸»è¦åŠŸèƒ½ï¼š<ol>\n<li>éªŒè¯ç”¨äºæ¥æ”¶ä»£å¸çš„è´¦å·æ˜¯å¦å­˜åœ¨</li>\n<li>éªŒè¯äº¤æ˜“è´¦å·æ˜¯å¦å…ç§Ÿé‡‘ï¼ˆæ³¨æ„äº†è§£ç›¸å…³æ¦‚å¿µï¼‰</li>\n<li>éªŒè¯äº¤æ˜“è´¦å·æœªåˆå§‹åŒ–è¿‡ï¼ˆæˆ‘è¿˜æ²¡ç†è§£ï¼Œè¯´æ³•æ˜¯åªèƒ½åˆå§‹åŒ–ä¸€æ¬¡ğŸ¤”ç•™ä¸€ä¸ªtodo!()åœ¨è¿™å¥½äº†ğŸ¤—ï¼‰</li>\n<li>æŠŠäº¤æ˜“è´¦å·çš„ä¿å­˜æ•°æ®åˆå§‹åŒ–å†™å›åŒºå—é“¾ä¸­ï¼ˆå‚è§<code>Escrow::pack</code>å‡½æ•°ï¼‰</li>\n<li>è½¬è®©ä¸´æ—¶ä»£å¸è´¦å·çš„æ‰€æœ‰æƒ</li>\n</ol>\n</li>\n</ul>\n<h2 id=\"æœ¬åœ°ç¼–è¯‘éƒ¨ç½²\"><a href=\"#æœ¬åœ°ç¼–è¯‘éƒ¨ç½²\" class=\"headerlink\" title=\"æœ¬åœ°ç¼–è¯‘éƒ¨ç½²\"></a>æœ¬åœ°ç¼–è¯‘éƒ¨ç½²</h2><div class=\"custom-quote warning\">\n<span class=\"custom-quote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M20.86 14.13C20 14.7 19.56 15.74 19.77 16.76C20.13 18.55 18.55 20.13 16.76 19.77C15.74 19.57 14.7 20 14.13 20.86C13.12 22.38 10.89 22.38 9.88 20.86C9.3 20 8.26 19.56 7.24 19.77C5.45 20.13 3.87 18.55 4.23 16.76C4.43 15.74 4 14.7 3.14 14.13C1.62 13.12 1.62 10.89 3.14 9.88C4 9.3 4.44 8.26 4.23 7.24C3.87 5.45 5.45 3.87 7.24 4.23C8.26 4.44 9.3 4 9.87 3.14C10.88 1.62 13.11 1.62 14.12 3.14C14.7 4 15.74 4.44 16.76 4.23C18.55 3.87 20.13 5.45 19.77 7.24C19.56 8.26 20 9.3 20.86 9.87C22.38 10.88 22.38 13.12 20.86 14.13Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12 8V13\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12 15.99V16.01\"></path>\n</svg>\n</span>\n<p class=\"custom-quote-title\">WARNING</p>\n<p><p><code>solana-install</code> å·¥å…·å·²è¢«å¼ƒç”¨ï¼Œå¹¶å°†åœ¨ Solana ç‰ˆæœ¬ 1.18 ä¸å†æ”¯æŒååœæ­¢ä½¿ç”¨!</p>\n<ul>\n<li>å¦‚æœä½ æå‰å®‰è£…äº†ï¼Œå¹¶ä¸”å®‰è£…çš„æ—¶solana-installçš„æ›´é«˜ç‰ˆæœ¬ï¼Œé‚£ä¹ˆæ­å–œä½ ï¼é‡è£…å§ğŸ¤—åæ­£æˆ‘é‡è£…äº†ï¼Œä¸»è¦æ˜¯åç»­ä½¿ç”¨<code>cargo-build-bpf</code>ä¸èƒ½æ­£å¸¸è°ƒå–åˆ°å‘½ä»¤ğŸ˜¤ï¼ŒåŒæ—¶æ•™ç¨‹ä¸­ä½¿ç”¨äº†<code>cargo build-bpf</code>,å¾ˆå¥‡æ€ªï¼Œæˆ‘å®‰è£…äº†ä½†æ˜¯è·‘ä¸äº†è¿™ä¸ªå‘½ä»¤ï¼Œå¥½åƒæ²¡æœ‰å†™å…¥åˆ°cargoé‡Œé¢ğŸ¤”ä¹Ÿå¯èƒ½æ˜¯windowsçš„é—®é¢˜</li>\n<li>ï¼ˆå†æ¬¡åæ§½windowsçš„æ•™ç¨‹å…¼å®¹æ€§ï¼ŒçœŸçš„çƒ‚ï¼Œæ–¹ä¾¿çš„è¿˜æ˜¯è½¬æˆ˜moc OSæˆ–è€…Linuxå§ğŸ¤—ğŸ¤—ï¼‰</li>\n</ul>\n</p>\n</div>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>åæ§½ç»“æŸï¼æ¥ä¸‹æ¥æ˜¯æ­£ç»æ•™å­¦</p></blockquote>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>ä»¥ä¸‹æ˜¯å‚è€ƒçš„csdnï¼š</p>\n<p>ç¼–è¯‘åˆçº¦ï¼Œæ‰“å¼€ç»ˆç«¯åˆ‡æ¢åˆ°é¡¹ç›®æ ¹ç›®å½•ï¼Œè¿è¡Œ<code>cargo build-bpf --manifest-path=./Cargo.toml --bpf-out-dir=dist/program</code>å¹¶å¿½è§†é‚£äº›è­¦å‘Šï¼ˆé‚£æ˜¯ä¸‹ä¸€æ­¥ä½¿ç”¨çš„ï¼‰ã€‚ç¼–è¯‘å®Œæˆåä¼šç»™å‡ºéƒ¨ç½²å‘½ä»¤ã€‚</p>\n<p>å¯åŠ¨æœ¬åœ°èŠ‚ç‚¹ã€‚æ‰“å¼€ä¸€ä¸ªç»ˆç«¯è¿è¡Œ<code>solana-test-validator</code>å¯åŠ¨æœ¬åœ°èŠ‚ç‚¹ã€‚</p>\n<p>è¿›è¡Œæœ¬åœ°é…ç½®ã€‚å¦å¤–æ‰“å¼€ä¸€ä¸ªç»ˆç«¯ï¼Œè¿è¡Œ<code>solana config get</code>çœ‹æ˜¯å¦æŒ‡å‘äº†æœ¬åœ°èŠ‚ç‚¹ï¼Œå¦‚æœä¸æ˜¯ï¼Œè¿è¡Œ<code>solana config set --url http://localhost:8899 </code>è¿›è¡Œè®¾ç½®ã€‚ç„¶åè¿è¡Œ<code>solana balance</code>ï¼Œä½ ä¼šå‘ç°ä½ æ‹¥æœ‰ 500000000 ä¸ªSOLã€‚-_- !!!</p>\n<p>è¿è¡Œç¼–è¯‘æ—¶ç»™å‡ºçš„éƒ¨ç½²å‘½ä»¤:</p>\n<p><code>solana program deploy ..../escrow/target/deploy/escrow.so</code><br>1<br>æœ€åå¾—åˆ°ä¸€ä¸ªç¨‹åºIDï¼Œéœ€è¦è®°ä¸‹æ¥ï¼Œä¾‹å¦‚æˆ‘ä»¬çš„ä¸º:<code>HEptwBGd4ShMYP6vNCE6vsDmuG3bGzQCcRPHfapvNeys</code></p></blockquote>\n<p>æ¥ä¸‹æ¥ï¼Œå‡å¦‚ä½ æ˜¯windowsä¸”åœ¨è¿™éƒ¨å¤šæ¬¡é‡åˆ°å›°éš¾ï¼Œä½ å¯ä»¥çœ‹çœ‹æˆ‘çš„è§£å†³æ–¹æ¡ˆï¼š</p>\n<ul>\n<li><p>é€šè¿‡<a href=\"https://github.com/anza-xyz/agave\">agave</a>çš„relaseä¸‹è½½<code>agave-install-init</code>[^4]ï¼Œåœ¨cmdä¸­è¿è¡Œï¼š<code>agave-install-init-x86_64-pc-windows-msvc.exe v1.18.22</code> å¦‚æœå®‰è£…æ²¡é—®é¢˜ï¼Œä½ çš„<code>agave-install</code>å’Œ<code>cargo-build-bpf</code>éƒ½åº”è¯¥èƒ½æ­£å¸¸è¿è¡Œï¼Ÿèƒ½æ‰¾åˆ°å‘½ä»¤å°±æ²¡é—®é¢˜ç„¶åä½ å°±èƒ½æ¥ç€ä¸Šé¢ç»§ç»­è·Ÿéšæ“ä½œäº†ï¼Œè®°å¾—ç”¨<code>cargo-build-bpf</code></p>\n</li>\n<li><p>å¦‚æœæŠ¥æƒé™é—®é¢˜ï¼Œå°±ç”¨ç®¡ç†å‘˜æƒé™ï¼Œæˆ‘ä¼šåœ¨åç»­æä¾›æˆ‘çš„è§£å†³æ–¹æ¡ˆï¼ˆä½¿ç”¨batè„šæœ¬ï¼Œè¿™æ ·ä½ åªè¦åœ¨ä½ çš„ç¼–è¾‘å™¨è‡ªå¸¦terminalè¿è¡Œäº†ï¼Œè™½ç„¶ä¼šå†å¼€ä¸€ä¸ªç»ˆç«¯ä½†æ˜¯é—®é¢˜ä¸å¤§ï¼Œå¤§å¤§ç®€åŒ–æ“ä½œäº†ï¼‰</p>\n</li>\n<li><p>å¯¹äº†ï¼Œ<del>é¢å¤–è¯´ä¸€å¥ï¼Œæˆ‘æ²¡æœ‰çœ‹åˆ°500000000 ä¸ªSOL</del>åœ¨æˆ‘è¯¯æ‰“è¯¯æ’å°è¯•äº†<code>solana airdrop 2</code>å’Œ<code>solana airdrop 1000</code>ä»¥åŠ<code> solana airdrop 1000 -k id.json</code>æˆ‘çš„è´¦æˆ·å‡ºç°äº†500000000 SOLä¸çŸ¥é“æ€ä¹ˆå‡ºç°çš„ï¼Œä¸è¿‡é—®é¢˜åº”è¯¥ä¸å¤§ğŸ¤—</p>\n</li>\n<li><div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">æ²¡æœ‰é…ç½®å¤§æ¦‚ä¼šå˜æˆè¿™æ ·</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> solana balance</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">Error:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">Dynamic</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">program</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">error:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">No</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">default</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">signer</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">found,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">run</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">solana-keygen new -o C:\\Users\\Raphaeltop\\.config\\solana\\id.json</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">to</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">create</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">a</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">one</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;!</span><span style=\"color: #FFCB6B\">--codeï¿¼12--&gt;</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">1ã€åˆ›å»ºAliceè´¦å·å¹¶é¢†å–ç©ºæŠ•SOLä½œä¸ºæ‰‹ç»­è´¹</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">2ã€éƒ¨ç½²spl-tokenåˆçº¦ï¼Œè¿™ä¸ªå·²ç»é»˜è®¤åŒ…å«åœ¨æœ¬åœ°èŠ‚ç‚¹äº†,åœ°å€ä¸º:TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DAã€‚</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">3ã€éƒ¨ç½²spl-associated-token-accountåˆçº¦ï¼Œé»˜è®¤å·²æœ‰ï¼Œåœ°å€ä¸º:ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">4ã€å‘è¡ŒXå’ŒYä¸¤ç§ä»£å¸ã€‚</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">5ã€åˆ›å»ºAliceåœ¨Xä»£å¸å’ŒYä»£å¸çš„è´¦å·ï¼ˆä¸»è´¦å·ï¼Œè¿™é‡Œä½¿ç”¨å”¯ä¸€çš„ä»£å¸å…³è”åœ°å€ï¼‰ã€‚</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">6ã€ç»™Aliceå¢å‘è¶³å¤Ÿæ•°é‡çš„Xä»£å¸è¿›è¡Œæµ‹è¯•</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;!</span><span style=\"color: #FFCB6B\">--codeï¿¼13--&gt;</span></span></code></pre></div></li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> &#123;</span><br><span class=\"line\">    <span class=\"title class_\">Keypair</span>,</span><br><span class=\"line\">    <span class=\"title class_\">Transaction</span>,</span><br><span class=\"line\">    <span class=\"variable constant_\">LAMPORTS_PER_SOL</span>,</span><br><span class=\"line\">    <span class=\"title class_\">Connection</span>,</span><br><span class=\"line\">    sendAndConfirmTransaction</span><br><span class=\"line\">&#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;@solana/web3.js&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123;<span class=\"title class_\">Token</span>,<span class=\"variable constant_\">ASSOCIATED_TOKEN_PROGRAM_ID</span>,<span class=\"variable constant_\">TOKEN_PROGRAM_ID</span>&#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;@solana/spl-token&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> rpcUrl = <span class=\"string\">&quot;http://localhost:8899 &quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> connection = <span class=\"keyword\">new</span> <span class=\"title class_\">Connection</span>(rpcUrl, <span class=\"string\">&#x27;confirmed&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> initSupplyTokenX = <span class=\"number\">100000000</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"keyword\">function</span> <span class=\"title function_\">prepair</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">//åˆ›å»ºAliceè´¦å·é¢†å–ç©ºæŠ•</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> alice = <span class=\"title class_\">Keypair</span>.<span class=\"title function_\">generate</span>()</span><br><span class=\"line\">    signer = alice;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title function_\">showWallet</span>(alice))</span><br><span class=\"line\">    <span class=\"keyword\">let</span>  aliceAirdropSignature = <span class=\"keyword\">await</span> connection.<span class=\"title function_\">requestAirdrop</span>(</span><br><span class=\"line\">        alice.<span class=\"property\">publicKey</span>,</span><br><span class=\"line\">        <span class=\"variable constant_\">LAMPORTS_PER_SOL</span>,</span><br><span class=\"line\">    );</span><br><span class=\"line\">    <span class=\"keyword\">await</span> connection.<span class=\"title function_\">confirmTransaction</span>(aliceAirdropSignature);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> lamports = <span class=\"keyword\">await</span> connection.<span class=\"title function_\">getBalance</span>(alice.<span class=\"property\">publicKey</span>);</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;Alice lamports:&quot;</span>,lamports)</span><br><span class=\"line\">    <span class=\"comment\">//å‘è¡Œä»£å¸X</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> tokenX = <span class=\"keyword\">await</span> <span class=\"title class_\">Token</span>.<span class=\"title function_\">createMint</span>(</span><br><span class=\"line\">        connection,</span><br><span class=\"line\">        alice,</span><br><span class=\"line\">        alice.<span class=\"property\">publicKey</span>,</span><br><span class=\"line\">        <span class=\"literal\">null</span>,</span><br><span class=\"line\">        <span class=\"number\">9</span>,</span><br><span class=\"line\">        <span class=\"variable constant_\">TOKEN_PROGRAM_ID</span></span><br><span class=\"line\">    )</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;tokenX:&quot;</span>,tokenX.<span class=\"property\">publicKey</span>.<span class=\"title function_\">toBase58</span>())</span><br><span class=\"line\">    <span class=\"comment\">//åˆ›å»ºAliceçš„Xä»£å¸å…³è”è´¦å·å¹¶ä¸”å¢å‘ä»£å¸</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> alice_x = <span class=\"keyword\">await</span> <span class=\"title function_\">createAssociatedAccout</span>(tokenX,alice.<span class=\"property\">publicKey</span>,alice,<span class=\"literal\">true</span>)</span><br><span class=\"line\">    <span class=\"keyword\">let</span> info = <span class=\"keyword\">await</span> tokenX.<span class=\"title function_\">getAccountInfo</span>(alice_x,<span class=\"string\">&quot;confirmed&quot;</span>)</span><br><span class=\"line\">    info.<span class=\"property\">owner</span> = info.<span class=\"property\">owner</span>.<span class=\"title function_\">toBase58</span>()</span><br><span class=\"line\">    info.<span class=\"property\">mint</span> = info.<span class=\"property\">mint</span>.<span class=\"title function_\">toBase58</span>()</span><br><span class=\"line\">    info.<span class=\"property\">address</span> = info.<span class=\"property\">address</span>.<span class=\"title function_\">toBase58</span>()</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;alice_x:&quot;</span>,info)</span><br><span class=\"line\">    <span class=\"comment\">//åˆ›å»ºtokenY</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> tokenY = <span class=\"keyword\">await</span> <span class=\"title class_\">Token</span>.<span class=\"title function_\">createMint</span>(</span><br><span class=\"line\">        connection,</span><br><span class=\"line\">        alice,</span><br><span class=\"line\">        alice.<span class=\"property\">publicKey</span>,</span><br><span class=\"line\">        <span class=\"literal\">null</span>,</span><br><span class=\"line\">        <span class=\"number\">9</span>,</span><br><span class=\"line\">        <span class=\"variable constant_\">TOKEN_PROGRAM_ID</span></span><br><span class=\"line\">    )</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;tokenY:&quot;</span>,tokenY.<span class=\"property\">publicKey</span>.<span class=\"title function_\">toBase58</span>())</span><br><span class=\"line\">    <span class=\"comment\">//åˆ›å»ºaliceåœ¨tokenYçš„å…³è”è´¦å·</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> alice_y = <span class=\"keyword\">await</span> <span class=\"title function_\">createAssociatedAccout</span>(tokenY,alice.<span class=\"property\">publicKey</span>,alice,<span class=\"literal\">false</span>)</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;alice_y_publicKey:&quot;</span>,alice_y.<span class=\"title function_\">toBase58</span>())</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//åˆ›å»ºå…³è”åœ°å€å¹¶å¢å‘ä»£å¸</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"keyword\">function</span> <span class=\"title function_\">createAssociatedAccout</span>(<span class=\"params\">tokenObj,owner,signer,isMint</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">//ç¬¬ä¸€æ­¥ï¼Œè®¡ç®—å…³è”åœ°å€</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> associatedAddress = <span class=\"keyword\">await</span> <span class=\"title function_\">getAssociatedTokenAddress</span>(</span><br><span class=\"line\">        <span class=\"variable constant_\">TOKEN_PROGRAM_ID</span>,</span><br><span class=\"line\">        tokenObj.<span class=\"property\">publicKey</span>,</span><br><span class=\"line\">        owner</span><br><span class=\"line\">    )</span><br><span class=\"line\">    <span class=\"comment\">//ç¬¬äºŒæ­¥ åˆ›å»ºå…³è”è´¦å·ï¼ˆæ­¤æ—¶ASSOCIATED_TOKEN_PROGRAMä¼šè‡ªåŠ¨è¿›è¡Œåˆå§‹åŒ–ï¼‰</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> transaction = <span class=\"keyword\">new</span> <span class=\"title class_\">Transaction</span>()</span><br><span class=\"line\">    transaction.<span class=\"title function_\">add</span>(</span><br><span class=\"line\">        <span class=\"title class_\">Token</span>.<span class=\"title function_\">createAssociatedTokenAccountInstruction</span>(</span><br><span class=\"line\">          <span class=\"variable constant_\">ASSOCIATED_TOKEN_PROGRAM_ID</span>,</span><br><span class=\"line\">          <span class=\"variable constant_\">TOKEN_PROGRAM_ID</span>,</span><br><span class=\"line\">          tokenObj.<span class=\"property\">publicKey</span>,</span><br><span class=\"line\">          associatedAddress,</span><br><span class=\"line\">          owner,</span><br><span class=\"line\">          signer.<span class=\"property\">publicKey</span>,</span><br><span class=\"line\">        )</span><br><span class=\"line\">    );</span><br><span class=\"line\">    <span class=\"comment\">// ç¬¬ä¸‰æ­¥ å¢å‘ä»£å¸</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(isMint) &#123;</span><br><span class=\"line\">        transaction.<span class=\"title function_\">add</span>(</span><br><span class=\"line\">            <span class=\"title class_\">Token</span>.<span class=\"title function_\">createMintToInstruction</span>(</span><br><span class=\"line\">              <span class=\"variable constant_\">TOKEN_PROGRAM_ID</span>,</span><br><span class=\"line\">              tokenObj.<span class=\"property\">publicKey</span>,</span><br><span class=\"line\">              associatedAddress,  <span class=\"comment\">//æ³¨æ„è¿™é‡Œæ˜¯ç»™å…³è”åœ°å€å¢å‘</span></span><br><span class=\"line\">              owner,</span><br><span class=\"line\">              [],</span><br><span class=\"line\">              initSupplyTokenX,</span><br><span class=\"line\">            )</span><br><span class=\"line\">        )</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// ç¬¬å››æ­¥ å‘é€äº¤æ˜“</span></span><br><span class=\"line\">    <span class=\"keyword\">await</span> <span class=\"title function_\">sendAndConfirmTransaction</span>(</span><br><span class=\"line\">        connection,</span><br><span class=\"line\">        transaction,</span><br><span class=\"line\">        [signer]</span><br><span class=\"line\">    )</span><br><span class=\"line\">    <span class=\"keyword\">return</span> associatedAddress</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"keyword\">function</span> <span class=\"title function_\">getAssociatedTokenAddress</span>(<span class=\"params\">programId,mint,account</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> newAccount = <span class=\"keyword\">await</span> <span class=\"title class_\">Token</span>.<span class=\"title function_\">getAssociatedTokenAddress</span>(</span><br><span class=\"line\">        <span class=\"variable constant_\">ASSOCIATED_TOKEN_PROGRAM_ID</span>, <span class=\"comment\">//å…³è”åœ°å€å›ºå®šå…¬é’¥</span></span><br><span class=\"line\">        programId,      <span class=\"comment\">// ä»£å¸åˆçº¦å…¬é’¥</span></span><br><span class=\"line\">        mint,            <span class=\"comment\">//mint(ä»£å¸)æ ‡è¯†/å…¬é’¥</span></span><br><span class=\"line\">        account,            <span class=\"comment\">//ç©å®¶ä¸»è´¦å· å…¬é’¥</span></span><br><span class=\"line\">    )</span><br><span class=\"line\">    <span class=\"keyword\">return</span> newAccount</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">showWallet</span>(<span class=\"params\">wallet</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> result = [wallet.<span class=\"property\">publicKey</span>.<span class=\"title function_\">toBase58</span>(),<span class=\"title class_\">Buffer</span>.<span class=\"title function_\">from</span>(wallet.<span class=\"property\">secretKey</span>).<span class=\"title function_\">toString</span>(<span class=\"string\">&quot;hex&quot;</span>)]</span><br><span class=\"line\">    <span class=\"keyword\">return</span> result</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">prepair</span>().<span class=\"title function_\">then</span>(<span class=\"function\">() =&gt;</span> <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;over&quot;</span>))</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>ä¸»è¦åŠŸèƒ½ï¼š</p>\n<ul>\n<li>åˆ›å»ºä¸€ä¸ªæ–°è´¦æˆ·<code>alice</code>å¹¶è·å–<code>airdrop</code></li>\n<li>åˆ›å»ºå’Œç®¡ç†ä»£å¸ï¼ˆtokensï¼‰</li>\n<li>åˆ›å»ºå…³è”çš„ä»£å¸è´¦æˆ·ï¼ˆAssociated token accountsï¼‰</li>\n<li>å¢å‘ä»£å¸ï¼ˆmint tokensï¼‰</li>\n</ul>\n</li>\n<li><p>å¯¼å…¥æ¨¡å—éƒ¨åˆ†ï¼šï¼ˆè™½ç„¶è¿™éƒ¨åˆ†ä¸æ˜¯å¾ˆé‡è¦ï¼Œä½†æ˜¯é¢˜ä¸»è¿˜ä¸ç†Ÿæ‚‰ï¼Œæ‰€ä»¥ä¸ºäº†æ–¹ä¾¿å›é¡¾è¿˜æ˜¯ç½—åˆ—äº†ğŸ˜ï¼‰</p>\n<ul>\n<li><strong><code>Keypair</code></strong>: ç”¨äºç”Ÿæˆæ–°çš„å…¬ç§é’¥å¯¹ï¼Œä»£è¡¨ Solana ä¸­çš„ä¸€ä¸ªè´¦æˆ·ã€‚</li>\n<li><strong><code>Transaction</code></strong>: è¡¨ç¤ºä¸€æ¬¡äº¤æ˜“ï¼Œå…è®¸ä½ åœ¨åŒºå—é“¾ä¸Šç»„åˆå¤šä¸ªæŒ‡ä»¤ä¸€èµ·æ‰§è¡Œã€‚</li>\n<li><strong><code>LAMPORTS_PER_SOL</code></strong>: Solana ä¸Š 1 SOL çš„å•ä½ç­‰äº 10äº¿ Lamportsã€‚</li>\n<li><strong><code>Connection</code></strong>: ç”¨äºè¿æ¥åˆ° Solana åŒºå—é“¾ç½‘ç»œçš„å®¢æˆ·ç«¯ã€‚</li>\n<li><strong><code>sendAndConfirmTransaction</code></strong>: å‘é€å¹¶ç¡®è®¤äº¤æ˜“ã€‚</li>\n<li><strong><code>Token</code></strong>: æä¾› SPL ä»£å¸ï¼ˆSolana ä¸Šçš„ä»£å¸æ ‡å‡†ï¼‰çš„ç›¸å…³æ“ä½œæ–¹æ³•ã€‚</li>\n<li><strong><code>ASSOCIATED_TOKEN_PROGRAM_ID</code> å’Œ <code>TOKEN_PROGRAM_ID</code></strong>: æ˜¯ä¸ä»£å¸è´¦æˆ·æ“ä½œç›¸å…³çš„ Solana ç¨‹åºçš„æ ‡è¯†ç¬¦</li>\n</ul>\n</li>\n<li><p>åˆ›å»ºé“¾æ¥å’Œåˆå§‹ä¾›åº”é‡ï¼š</p>\n<ul>\n<li><strong><code>rpcUrl</code></strong>: æŒ‡å®šè¿æ¥åˆ°æœ¬åœ°è¿è¡Œçš„ Solana èŠ‚ç‚¹çš„ RPC URLã€‚</li>\n<li><strong><code>connection</code></strong>: ä¸ Solana åŒºå—é“¾çš„è¿æ¥å¯¹è±¡ã€‚</li>\n<li><strong><code>initSupplyTokenX</code></strong>: åˆå§‹ä¾›åº”é‡ï¼Œè¡¨ç¤º TokenX å‘è¡Œçš„åˆå§‹æ•°é‡ã€‚</li>\n</ul>\n</li>\n<li><p><code>prepair</code> å‡½æ•°<br>ä¸»å‡½æ•°ï¼Œæ‰§è¡Œä»£å¸åˆ›å»ºå’Œè´¦æˆ·ç®¡ç†æ“ä½œ</p>\n</li>\n<li><p><strong>åˆ›å»º Alice è´¦å·</strong>:</p>\n<ul>\n<li><code>Keypair.generate()</code> åˆ›å»ºä¸€ä¸ªæ–°çš„å¯†é’¥å¯¹ï¼ˆå³ Alice çš„è´¦æˆ·ï¼‰ã€‚</li>\n<li>è¯·æ±‚ç©ºæŠ•ï¼ˆAirdropï¼‰1 SOL ç»™ Alice çš„è´¦æˆ·ï¼Œå¹¶ç¡®è®¤è¿™ç¬”äº¤æ˜“ã€‚</li>\n</ul>\n</li>\n<li><p>**å‘è¡Œä»£å¸<code>TokenX</code>**ï¼š</p>\n<ul>\n<li><strong><code>Token.createMint</code></strong>: åˆ›å»ºä¸€ä¸ªæ–°çš„ä»£å¸ï¼ˆTokenXï¼‰ã€‚<ul>\n<li><strong><code>connection</code></strong>: ç”¨äºé“¾ä¸Šæ“ä½œçš„è¿æ¥å¯¹è±¡ã€‚</li>\n<li><strong><code>alice</code></strong>: ä»£å¸åˆ›å»ºè€…çš„ Keypairï¼ˆå³ Aliceï¼‰ã€‚</li>\n<li><strong><code>alice.publicKey</code></strong>: ä»£å¸çš„åˆå§‹æˆæƒè€…ã€‚</li>\n<li><strong><code>null</code></strong>: è¡¨ç¤ºä»£å¸ä¸å…è®¸å†»ç»“è´¦æˆ·ã€‚</li>\n<li><strong><code>9</code></strong>: ä»£å¸çš„å°æ•°ä½æ•°ï¼ˆè¡¨ç¤ºä»£å¸çš„ç²¾åº¦ï¼Œå’Œ SOL ä¸€æ ·æœ‰9ä¸ªå°æ•°ä½ï¼‰ã€‚</li>\n<li><strong><code>TOKEN_PROGRAM_ID</code></strong>: ä»£å¸ç¨‹åºçš„æ ‡è¯†ç¬¦ã€‚</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p><strong>åˆ›å»ºAliceçš„ä»£å¸Xå…³è”è´¦æˆ·å¹¶å¢å‘ä»£å¸</strong></p>\n<ul>\n<li><div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C792EA\">let</span><span style=\"color: #BABED8\"> alice_x </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">await</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">createAssociatedAccout</span><span style=\"color: #BABED8\">(tokenX</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\">alice</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">publicKey</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\">alice</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #FF9CAC\">true</span><span style=\"color: #BABED8\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;!--</span><span style=\"color: #BABED8\">codeï¿¼</span><span style=\"color: #F78C6C\">15</span><span style=\"color: #89DDFF\">--&gt;</span></span></code></pre></div></li>\n</ul>\n</li>\n</ul>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><ul>\n<li><h3 id=\"å…³é”®ç‚¹æ€»ç»“\"><a href=\"#å…³é”®ç‚¹æ€»ç»“\" class=\"headerlink\" title=\"å…³é”®ç‚¹æ€»ç»“\"></a>å…³é”®ç‚¹æ€»ç»“</h3><ul>\n<li><strong>Aliceè´¦æˆ·</strong>ï¼šä½œä¸ºä¸ªäººè´¦æˆ·ï¼Œå®ƒæŒæœ‰SOLå’Œä»£å¸é“¸é€ æƒé™ï¼Œæ§åˆ¶TokenXå’ŒTokenYçš„å¢å‘ã€‚</li>\n<li><strong>TokenXå’ŒTokenYä»£å¸</strong>ï¼šç”±Aliceè´¦æˆ·é“¸é€ ï¼Œå¯ä»¥åœ¨ç›¸å…³çš„å…³è”è´¦æˆ·ä¸­æŒæœ‰ã€‚</li>\n<li><strong>å…³è”è´¦æˆ·ï¼ˆATAï¼‰</strong>ï¼šä¸“é—¨ç”¨äºæŒæœ‰æŸç§ç‰¹å®šä»£å¸ï¼ˆå¦‚TokenXæˆ–TokenYï¼‰çš„è´¦æˆ·ï¼Œç”±å…¶å…³è”çš„ç”¨æˆ·è´¦æˆ·ï¼ˆAliceè´¦æˆ·ï¼‰æ§åˆ¶ã€‚</li>\n<li><strong>ä»£å¸ä¸å…³è”è´¦æˆ·çš„å…³ç³»</strong>ï¼šæ¯ä¸ªå…³è”è´¦æˆ·ï¼ˆATAï¼‰åªèƒ½æŒæœ‰ä¸€ç§ç‰¹å®šçš„ä»£å¸ï¼Œä¸åˆ›å»ºè¯¥å…³è”è´¦æˆ·çš„ä¸»è´¦æˆ·ï¼ˆå¦‚Aliceï¼‰æœ‰ç›´æ¥çš„å…³è”å…³ç³»ã€‚</li>\n</ul>\n</li>\n<li><p>è®©Aliceè´¦æˆ·å¯ä»¥ç®¡ç†å¤šä¸ªä»£å¸ï¼Œå¹¶ä½¿ç”¨ç›¸å…³çš„å…³è”è´¦æˆ·æ¥åˆ†åˆ«æŒæœ‰å’Œæ“ä½œè¿™äº›ä»£å¸</p>\n</li>\n</ul></blockquote>\n<p>::: warning</p>\n<p>æ³¨æ„ï¼Œå¤§æ¦‚ç‡æ˜¯ç‰ˆæœ¬æ›´æ–°çš„é—®é¢˜ï¼Œè¿™ä»½ä»£ç å·²ç»è·‘ä¸äº†äº†ğŸ¤—åšä¸»å·²ç»å„ä½å°è¯•äº†ï¼ŒèŠ±äº†å¾ˆå¤šçš„æ—¶é—´ï¼Œç»“è®ºæ˜¯è·‘ä¸äº†ã€‚è¿™è¾¹å‡†å¤‡æ¢å»è°ƒæ¡†æ¶äº†ï¼Œä½†æ˜¯è¿˜æ˜¯ä¼šæŠŠåç»­çœ‹å®Œçš„ï¼ŒåŸºç¡€è¿˜æ˜¯è¦çœ‹çœ‹çš„ğŸ“–</p>\n<p>:::</p>\n<h3 id=\"æµ‹è¯•æ‰˜ç®¡åˆçº¦åˆå§‹åŒ–\"><a href=\"#æµ‹è¯•æ‰˜ç®¡åˆçº¦åˆå§‹åŒ–\" class=\"headerlink\" title=\"æµ‹è¯•æ‰˜ç®¡åˆçº¦åˆå§‹åŒ–\"></a>æµ‹è¯•æ‰˜ç®¡åˆçº¦åˆå§‹åŒ–</h3><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>1ã€åˆ›å»ºä¸€ä¸ªè¢«tokenåˆçº¦æ‹¥æœ‰çš„ç©ºçš„è´¦å·<br>2ã€å°†è¿™ä¸ªç©ºçš„è´¦å·åˆå§‹åŒ–ä¸ºAliceçš„Xä»£å¸è´¦å·ï¼ˆä¸´æ—¶è´¦å·ï¼‰<br>3ã€Aliceå°†å¥¹çš„ä»£å¸Xä»ä¸»è´¦å·è½¬ç§»åˆ°ä¸´æ—¶è´¦å·<br>4ã€åˆ›å»ºä¸€ä¸ªè¢«æ‰˜ç®¡åˆçº¦æ‹¥æœ‰çš„ç©ºè´¦å·<br>5ã€å°†è¿™ä¸ªç©ºè´¦å·åˆå§‹åŒ–ä¸ºäº¤æ˜“çŠ¶æ€è´¦å·å¹¶ä¸”å°†Aliceçš„ä¸´æ—¶Xä»£å¸è´¦å·è½¬ç§»åˆ°PDAï¼ˆç¨‹åºæ´¾ç”Ÿè´¦å·ï¼‰ã€‚</p></blockquote>\n<p>æ³¨æ„ï¼Œåˆçº¦éƒ¨ç½²æ—¶çš„åœ°å€å…¶å®åœ¨ç¼–è¯‘åæ˜¯å¯ä»¥æ‹¿åˆ°çš„ï¼Œä½¿ç”¨<code>solana address -k .../....so</code>å°±å¯ä»¥è·å–äº†</p>\n<p>åœ¨<code>/test/</code>ç›®å½•ä¸‹å»ºç«‹<code>init.js</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> &#123;</span><br><span class=\"line\">    <span class=\"title class_\">Keypair</span>,</span><br><span class=\"line\">    <span class=\"title class_\">PublicKey</span>,</span><br><span class=\"line\">    <span class=\"title class_\">Transaction</span>,</span><br><span class=\"line\">    <span class=\"title class_\">TransactionInstruction</span>,</span><br><span class=\"line\">    <span class=\"title class_\">SystemProgram</span>,</span><br><span class=\"line\">    <span class=\"title class_\">Connection</span>,</span><br><span class=\"line\">    <span class=\"variable constant_\">SYSVAR_RENT_PUBKEY</span>,</span><br><span class=\"line\">    sendAndConfirmTransaction</span><br><span class=\"line\">&#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;@solana/web3.js&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123;<span class=\"title class_\">Token</span>,<span class=\"variable constant_\">TOKEN_PROGRAM_ID</span>&#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;@solana/spl-token&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">BufferLayout</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;buffer-layout&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"variable constant_\">BN</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;bn.js&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> rpcUrl = <span class=\"string\">&quot;http://localhost:8899 &quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> connection = <span class=\"keyword\">new</span> <span class=\"title class_\">Connection</span>(rpcUrl, <span class=\"string\">&#x27;confirmed&#x27;</span>);</span><br><span class=\"line\"><span class=\"comment\">//æˆ‘ä»¬çš„æ‰˜ç®¡ç¨‹åºåœ°å€</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> escrowProgramId = <span class=\"keyword\">new</span> <span class=\"title class_\">PublicKey</span>(<span class=\"string\">&quot;HEptwBGd4ShMYP6vNCE6vsDmuG3bGzQCcRPHfapvNeys&quot;</span>)</span><br><span class=\"line\"><span class=\"comment\">//ä»ç§é’¥ä¸­æ¢å¤aliceçš„é’±åŒ…</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> alice_privateKey = <span class=\"string\">&quot;49372f691baa9cb4f6d5f485e43b685adb26055cdc545728bd2ff808d0bf92ea870d687c5de0f7eac13cd6050b1c78e23345575ca4b2fc241d65705983015eb1&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> alice = <span class=\"title class_\">Keypair</span>.<span class=\"title function_\">fromSecretKey</span>(<span class=\"title class_\">Uint8Array</span>.<span class=\"title function_\">from</span>(<span class=\"title class_\">Buffer</span>.<span class=\"title function_\">from</span>(alice_privateKey, <span class=\"string\">&#x27;hex&#x27;</span>)))</span><br><span class=\"line\"><span class=\"comment\">//ä»ä»£å¸Xåœ°å€ä¸­æ¢å¤ä»£å¸Xå¯¹è±¡</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> token_x = <span class=\"keyword\">new</span> <span class=\"title class_\">PublicKey</span>(<span class=\"string\">&quot;FMYttGRGuYCrgqCRZLhLoUESqo9Sfe87DKdH7JLZGB6G&quot;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> tokenX = <span class=\"keyword\">new</span> <span class=\"title class_\">Token</span>(connection,token_x,<span class=\"variable constant_\">TOKEN_PROGRAM_ID</span>,alice)</span><br><span class=\"line\"><span class=\"comment\">//Aliceåœ¨ä»£å¸Xçš„å…³è”è´¦å·ï¼ˆå…¬é’¥ï¼‰</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> alice_x = <span class=\"keyword\">new</span> <span class=\"title class_\">PublicKey</span>(<span class=\"string\">&quot;6fBN3uzsDKfG2nDLnpP4NknMocQX85AB1vqCWfXbW9os&quot;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> alice_y = <span class=\"string\">&quot;Bu8Heft6Lsih32Z6yaVFQqVndDtzAmJdMS8friSLb59w&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">publicKey</span> = (<span class=\"params\">property</span>) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"title class_\">BufferLayout</span>.<span class=\"title function_\">blob</span>(<span class=\"number\">32</span>, property);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">uint64</span> = (<span class=\"params\">property</span>) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"title class_\">BufferLayout</span>.<span class=\"title function_\">blob</span>(<span class=\"number\">8</span>, property);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"variable constant_\">ESCROW_ACCOUNT_DATA_LAYOUT</span> = <span class=\"title class_\">BufferLayout</span>.<span class=\"title function_\">struct</span>([</span><br><span class=\"line\">    <span class=\"title class_\">BufferLayout</span>.<span class=\"title function_\">u8</span>(<span class=\"string\">&quot;isInitialized&quot;</span>),</span><br><span class=\"line\">    <span class=\"title function_\">publicKey</span>(<span class=\"string\">&quot;initializerPubkey&quot;</span>),</span><br><span class=\"line\">    <span class=\"title function_\">publicKey</span>(<span class=\"string\">&quot;initializerTempTokenAccountPubkey&quot;</span>),</span><br><span class=\"line\">    <span class=\"title function_\">publicKey</span>(<span class=\"string\">&quot;initializerReceivingTokenAccountPubkey&quot;</span>),</span><br><span class=\"line\">    <span class=\"title function_\">uint64</span>(<span class=\"string\">&quot;expectedAmount&quot;</span>),</span><br><span class=\"line\">]);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"variable constant_\">SWAP_AMOUNT</span> = <span class=\"number\">1000</span>;    <span class=\"comment\">//è®¡åˆ’äº¤æ˜“çš„Xæ•°é‡</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> expectedAmount = <span class=\"number\">1200</span>; <span class=\"comment\">//æœŸæœ›å¾—åˆ°çš„Yæ•°é‡</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">Escrow</span>_Size = <span class=\"variable constant_\">ESCROW_ACCOUNT_DATA_LAYOUT</span>.<span class=\"property\">span</span>; <span class=\"comment\">//105ï¼Œæ‰˜ç®¡åˆçº¦ä¸­äº¤æ˜“è´¦å·æ•°æ®å¤§å°ï¼Œå…¶å®æˆ‘ä»¬åœ¨åˆçº¦state.rsä¸­å·²ç»çŸ¥é“å¤§å°äº†</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"keyword\">function</span> <span class=\"title function_\">init</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">//åˆ›å»ºAliceåœ¨Xä»£å¸çš„ä¸´æ—¶è´¦å·,è¿™é‡Œä½¿ç”¨SDKè‡ªåŠ¨å¸®æˆ‘ä»¬åˆ›å»ºäº†ã€‚</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> temp_account = <span class=\"keyword\">await</span> tokenX.<span class=\"title function_\">createAccount</span>(alice.<span class=\"property\">publicKey</span>)</span><br><span class=\"line\">    <span class=\"comment\">//è½¬ç§»Xä»£å¸æŒ‡ä»¤</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> transaction = <span class=\"keyword\">new</span> <span class=\"title class_\">Transaction</span>().<span class=\"title function_\">add</span>(</span><br><span class=\"line\">        <span class=\"title class_\">Token</span>.<span class=\"title function_\">createTransferInstruction</span>(</span><br><span class=\"line\">          <span class=\"variable constant_\">TOKEN_PROGRAM_ID</span>,</span><br><span class=\"line\">          alice_x,</span><br><span class=\"line\">          temp_account,</span><br><span class=\"line\">          alice.<span class=\"property\">publicKey</span>,</span><br><span class=\"line\">          [],</span><br><span class=\"line\">          <span class=\"variable constant_\">SWAP_AMOUNT</span>,</span><br><span class=\"line\">        ),</span><br><span class=\"line\">    );</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">const</span> escrowAccount = <span class=\"title class_\">Keypair</span>.<span class=\"title function_\">generate</span>() <span class=\"comment\">//äº§ç”Ÿä¸€ä¸ªéšæœºå…¬/ç§é’¥å¯¹</span></span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;escrowAccount:&quot;</span>,escrowAccount.<span class=\"property\">publicKey</span>.<span class=\"title function_\">toBase58</span>())</span><br><span class=\"line\">    <span class=\"comment\">//åˆ›å»ºæ‰˜ç®¡è´¦å·æŒ‡ä»¤</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> createEscrowAccountIx = <span class=\"title class_\">SystemProgram</span>.<span class=\"title function_\">createAccount</span>(&#123;</span><br><span class=\"line\">        <span class=\"attr\">space</span>: <span class=\"title class_\">Escrow</span>_Size,</span><br><span class=\"line\">        <span class=\"attr\">lamports</span>: <span class=\"keyword\">await</span> connection.<span class=\"title function_\">getMinimumBalanceForRentExemption</span>(<span class=\"title class_\">Escrow</span>_Size, <span class=\"string\">&#x27;confirmed&#x27;</span>),</span><br><span class=\"line\">        <span class=\"attr\">fromPubkey</span>: alice.<span class=\"property\">publicKey</span>,</span><br><span class=\"line\">        <span class=\"attr\">newAccountPubkey</span>: escrowAccount.<span class=\"property\">publicKey</span>,</span><br><span class=\"line\">        <span class=\"attr\">programId</span>: escrowProgramId</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    transaction.<span class=\"title function_\">add</span>(createEscrowAccountIx)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//åˆå§‹åŒ–æ‰˜ç®¡è´¦å·æŒ‡ä»¤</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> initEscrowIx = <span class=\"keyword\">new</span> <span class=\"title class_\">TransactionInstruction</span>(&#123;</span><br><span class=\"line\">        <span class=\"attr\">programId</span>: escrowProgramId,</span><br><span class=\"line\">        <span class=\"attr\">keys</span>: [</span><br><span class=\"line\">            &#123; <span class=\"attr\">pubkey</span>: alice.<span class=\"property\">publicKey</span>, <span class=\"attr\">isSigner</span>: <span class=\"literal\">true</span>, <span class=\"attr\">isWritable</span>: <span class=\"literal\">false</span> &#125;,</span><br><span class=\"line\">            &#123; <span class=\"attr\">pubkey</span>: temp_account, <span class=\"attr\">isSigner</span>: <span class=\"literal\">false</span>, <span class=\"attr\">isWritable</span>: <span class=\"literal\">true</span> &#125;,</span><br><span class=\"line\">            &#123; <span class=\"attr\">pubkey</span>: alice_y, <span class=\"attr\">isSigner</span>: <span class=\"literal\">false</span>, <span class=\"attr\">isWritable</span>: <span class=\"literal\">false</span> &#125;,</span><br><span class=\"line\">            &#123; <span class=\"attr\">pubkey</span>: escrowAccount.<span class=\"property\">publicKey</span>, <span class=\"attr\">isSigner</span>: <span class=\"literal\">false</span>, <span class=\"attr\">isWritable</span>: <span class=\"literal\">true</span> &#125;,</span><br><span class=\"line\">            &#123; <span class=\"attr\">pubkey</span>: <span class=\"variable constant_\">SYSVAR_RENT_PUBKEY</span>, <span class=\"attr\">isSigner</span>: <span class=\"literal\">false</span>, <span class=\"attr\">isWritable</span>: <span class=\"literal\">false</span>&#125;,</span><br><span class=\"line\">            &#123; <span class=\"attr\">pubkey</span>: <span class=\"variable constant_\">TOKEN_PROGRAM_ID</span>, <span class=\"attr\">isSigner</span>: <span class=\"literal\">false</span>, <span class=\"attr\">isWritable</span>: <span class=\"literal\">false</span> &#125;,</span><br><span class=\"line\">        ],</span><br><span class=\"line\">        <span class=\"attr\">data</span>: <span class=\"title class_\">Buffer</span>.<span class=\"title function_\">from</span>(<span class=\"title class_\">Uint8Array</span>.<span class=\"title function_\">of</span>(<span class=\"number\">0</span>, ...<span class=\"keyword\">new</span> <span class=\"title function_\">BN</span>(expectedAmount).<span class=\"title function_\">toArray</span>(<span class=\"string\">&quot;le&quot;</span>, <span class=\"number\">8</span>)))</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    transaction.<span class=\"title function_\">add</span>(initEscrowIx)</span><br><span class=\"line\">    <span class=\"comment\">//å‘é€äº¤æ˜“</span></span><br><span class=\"line\">    <span class=\"keyword\">await</span> <span class=\"title function_\">sendAndConfirmTransaction</span>(</span><br><span class=\"line\">        connection,</span><br><span class=\"line\">        transaction,</span><br><span class=\"line\">        [alice,escrowAccount] <span class=\"comment\">//è¿™é‡Œè¦åˆ›å»ºescrowAccountï¼Œæ‰€ä»¥å®ƒå¿…é¡»ç­¾å</span></span><br><span class=\"line\">    )</span><br><span class=\"line\">    <span class=\"keyword\">const</span> encodedEscrowState = (<span class=\"keyword\">await</span> connection.<span class=\"title function_\">getAccountInfo</span>(escrowAccount.<span class=\"property\">publicKey</span>,<span class=\"string\">&#x27;confirmed&#x27;</span>)).<span class=\"property\">data</span>;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> decodedEscrowState = <span class=\"variable constant_\">ESCROW_ACCOUNT_DATA_LAYOUT</span>.<span class=\"title function_\">decode</span>(encodedEscrowState)</span><br><span class=\"line\">    <span class=\"keyword\">let</span> info = &#123;</span><br><span class=\"line\">        <span class=\"attr\">isInitialized</span>:decodedEscrowState.<span class=\"property\">isInitialized</span> === <span class=\"number\">1</span>,</span><br><span class=\"line\">        <span class=\"attr\">initializerPubkey</span>:<span class=\"keyword\">new</span> <span class=\"title class_\">PublicKey</span>(decodedEscrowState.<span class=\"property\">initializerPubkey</span>).<span class=\"title function_\">toBase58</span>(),</span><br><span class=\"line\">        <span class=\"attr\">initializerTempTokenAccountPubkey</span>:<span class=\"keyword\">new</span> <span class=\"title class_\">PublicKey</span>(decodedEscrowState.<span class=\"property\">initializerTempTokenAccountPubkey</span>).<span class=\"title function_\">toBase58</span>(),</span><br><span class=\"line\">        <span class=\"attr\">initializerReceivingTokenAccountPubkey</span>:<span class=\"keyword\">new</span> <span class=\"title class_\">PublicKey</span>(decodedEscrowState.<span class=\"property\">initializerReceivingTokenAccountPubkey</span>).<span class=\"title function_\">toBase58</span>(),</span><br><span class=\"line\">        <span class=\"attr\">expectedAmount</span>:<span class=\"keyword\">new</span> <span class=\"title function_\">BN</span>(decodedEscrowState.<span class=\"property\">expectedAmount</span>, <span class=\"number\">10</span>, <span class=\"string\">&quot;le&quot;</span>).<span class=\"title function_\">toNumber</span>()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;EscrowState:&quot;</span>,info)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">init</span>().<span class=\"title function_\">then</span>(<span class=\"function\">() =&gt;</span> <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;over&quot;</span>))</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn add buffer-layout</span><br><span class=\"line\">yarn add bn.js</span><br></pre></td></tr></table></figure>\n\n<p>åé¢æ²¡ä»€ä¹ˆé‡è¦å†…å®¹äº†âš™ï¸è¯·æœŸå¾…åç»­çš„æ–°å†…å®¹ğŸ¤—</p>\n","feature":true,"text":"ä¸€ä¸ªç®€å•çš„å­¦ä¹ è®°å½•ï¼Œå­¦ä¹ å¦‚ä½•æ„å»ºç¬¬ä¸€ä¸ªSolanaæ™ºèƒ½åˆçº¦...","permalink":"/post/Solana-coding-learning","photos":[],"count_time":{"symbolsCount":"26k","symbolsTime":"23 mins."},"categories":[{"name":"Rust","slug":"Rust","count":4,"path":"api/categories/Rust.json"},{"name":"åŒºå—é“¾","slug":"Rust/åŒºå—é“¾","count":2,"path":"api/categories/Rust/åŒºå—é“¾.json"}],"tags":[{"name":"rust","slug":"rust","count":4,"path":"api/tags/rust.json"},{"name":"solana","slug":"solana","count":2,"path":"api/tags/solana.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%89%8D%E8%A8%80\"><span class=\"toc-text\">å‰è¨€</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%89%8D%E6%9C%9F%E5%87%86%E5%A4%87\"><span class=\"toc-text\">å‰æœŸå‡†å¤‡</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%A1%B9%E7%9B%AE%E5%88%9B%E5%BB%BA\"><span class=\"toc-text\">é¡¹ç›®åˆ›å»º</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E7%BC%96%E5%86%99%E5%9F%BA%E6%9C%AC%E6%A1%86%E6%9E%B6\"><span class=\"toc-text\">ç¼–å†™åŸºæœ¬æ¡†æ¶</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Error-rs\"><span class=\"toc-text\">Error.rs</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#instruction-rs\"><span class=\"toc-text\">instruction.rs</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#processor-rs\"><span class=\"toc-text\">processor.rs</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#entrypoint-rs\"><span class=\"toc-text\">entrypoint.rs</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#state-rs\"><span class=\"toc-text\">state.rs</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#lib-rs\"><span class=\"toc-text\">lib.rs</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%AE%8C%E5%96%84-processor-rs\"><span class=\"toc-text\">å®Œå–„ processor.rs</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%9C%AC%E5%9C%B0%E7%BC%96%E8%AF%91%E9%83%A8%E7%BD%B2\"><span class=\"toc-text\">æœ¬åœ°ç¼–è¯‘éƒ¨ç½²</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%85%B3%E9%94%AE%E7%82%B9%E6%80%BB%E7%BB%93\"><span class=\"toc-text\">å…³é”®ç‚¹æ€»ç»“</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%B5%8B%E8%AF%95%E6%89%98%E7%AE%A1%E5%90%88%E7%BA%A6%E5%88%9D%E5%A7%8B%E5%8C%96\"><span class=\"toc-text\">æµ‹è¯•æ‰˜ç®¡åˆçº¦åˆå§‹åŒ–</span></a></li></ol></li></ol>","author":{"name":"RaphaelNY","slug":"blog-author","avatar":"/img/avatar.png","link":"/","description":"å¥½ããªã‚ˆã†ã«ã€è‡ªåˆ†ã®é¡˜ã„ã«å¾“ã£ã¦æ´»å‹•ã™ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ã€‚<br>ä¸å®šæœŸã«é¢ç™½ã„ã‚‚ã®ã‚’æ›´æ–°ã—ã¾ã™ï¼","socials":{"github":"https://github.com/RaphaelNY","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili-fffffff.svg","link":"https://live.bilibili.com/25369205"}}}},"mapped":true,"hidden":false,"prev_post":{},"next_post":{"title":"tauriä¸ªäººå…¥é—¨å»ºè®®","uid":"3b9e33d00820bf2a8cfa74fde48d213b","slug":"tauri-start-tutorial","date":"2024-04-27T12:25:49.000Z","updated":"2024-05-03T09:00:31.233Z","comments":true,"path":"api/articles/tauri-start-tutorial.json","keywords":null,"cover":"/img/tauri-start-tutorial-cover.png","text":"ä¸€ä¸ªç®€å•çš„å…¥é—¨tauriï¼Œæ•™ä½ å¦‚ä½•æœ€å¿«ä¸Šæ‰‹tauri+rust && ä¸€äº›æ³¨æ„äº‹é¡¹...","permalink":"/post/tauri-start-tutorial","photos":[],"count_time":{"symbolsCount":"1.9k","symbolsTime":"2 mins."},"categories":[{"name":"Rust","slug":"Rust","count":4,"path":"api/categories/Rust.json"},{"name":"tauri","slug":"Rust/tauri","count":2,"path":"api/categories/Rust/tauri.json"}],"tags":[{"name":"rust","slug":"rust","count":4,"path":"api/tags/rust.json"},{"name":"tauri","slug":"tauri","count":2,"path":"api/tags/tauri.json"}],"author":{"name":"RaphaelNY","slug":"blog-author","avatar":"/img/avatar.png","link":"/","description":"å¥½ããªã‚ˆã†ã«ã€è‡ªåˆ†ã®é¡˜ã„ã«å¾“ã£ã¦æ´»å‹•ã™ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ã€‚<br>ä¸å®šæœŸã«é¢ç™½ã„ã‚‚ã®ã‚’æ›´æ–°ã—ã¾ã™ï¼","socials":{"github":"https://github.com/RaphaelNY","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili-fffffff.svg","link":"https://live.bilibili.com/25369205"}}}},"feature":true}}