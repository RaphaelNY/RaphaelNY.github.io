[{"id":"52d0fe63d1c1ad7c08273efe980dc2ed","title":"Solana escrowåˆçº¦ ç¼–ç¨‹å­¦ä¹ ","content":"å‰è¨€è‹¦äºsolanaå…¥é—¨é—¨æ§›ï¼Œå¯¹äºåšä¸»è¿™æ ·çš„åŒºå—é“¾å°ç™½è€Œè¨€ï¼Œç¡®å®æœ‰äº›å¹¸è‹¦ğŸ˜­ã€‚æ‰€ä»¥ï¼Œç»è¿‡æŸ¥è¯¢ï¼Œæ‰¾åˆ°äº†ä¸€ç¯‡ç®€å•çš„å…¥é—¨æ•™ç¨‹ğŸ“–ã€‚\nåŒæ—¶ï¼Œè¿™æ˜¯æœ¬æ¬¡å­¦ä¹ çš„æºæ–‡ç« \n\n\n\n\n\n\nTIP\nå¦‚æœä½ å¯¹æ–¼åŒºå—é“¾æ²¡æœ‰ä»»ä½•çŸ¥è¯†ï¼Œæˆ–è€…è¯´ä½ å®Œå…¨æ²¡äº†è§£solanaï¼Œä½ ä¹Ÿè®¸å¯ä»¥å…ˆè€ƒè™‘ä»¥ä¸‹videoå’Œæ–‡æ¡£\n\nğŸ“ºã€Solanaå¼€å‘è¯¾ã€‘å­¦ä¹ ä½¿ç”¨Rust+JavaScriptè¿›è¡ŒSolanaåŒºå—é“¾å¼€å‘ | æŒæ¡ Web3ã€DAppã€NFTã€DeFiç­‰äº§å“å¼€å‘ | ä¸­æ–‡å­—å¹•\nğŸ“–ä»‹ç» | Solanaä¸­æ–‡å¤§å…¨ (solana-cn.com)\nğŸ“–Home | Solana Validator (solanalabs.com)\nğŸ“–Solana Documentation | Solana\nSolana æ™ºèƒ½åˆçº¦æŒ‡å— | ç™»é“¾ç¤¾åŒº | åŒºå—é“¾æŠ€æœ¯ç¤¾åŒº (learnblockchain.cn)\n\nè¿™è¾¹å»ºè®®ä½¿ç”¨â‘¡çš„æ–‡æ¡£ï¼Œæœ‰ä¸€è¯´ä¸€â‘£çš„zhç¿»è¯‘çœŸçš„æ˜¯ç¿»ä¸€åŠğŸ˜¤æˆ‘è¿˜æ˜¯å€¾å‘äºçœ‹äººè¯ç¿»è¯‘å‡ºæ¥çš„\n\n\nå‰æœŸå‡†å¤‡å®‰è£…Solana-cilã€‚æˆ‘è¿˜æ˜¯æ¨èä½¿ç”¨âš™ï¸Cargoæ¥è¿›è¡ŒåŒ…ç®¡ç†ï¼Œè€Œä¸æ˜¯ä½¿ç”¨å…¶ä»–é€”å¾„è¿›è¡Œå®‰è£…ğŸ¤—è£…ä¸äº†å»ºè®®æ¢ç½‘\n1cargo install solana-cli --locked --version 1.9.1\n\n\næ³¨æ„ä½ çš„âš™ï¸rustæœ€å¥½ä½¿ç”¨æœ€æ–°çš„ç‰ˆæœ¬ï¼Œsolana-cilçš„ç‰ˆæœ¬ä¹Ÿå»ºè®®ä½¿ç”¨æœ€æ–°çš„ï¼Œè¯¦ç»†å¯ä»¥å‚è€ƒcrate.io^1ã€‚\n\né¡¹ç›®åˆ›å»º1cargo new escrow --lib\n\n\n\n\n\n\n\nTIP\næ³¨æ„ï¼Œä¸‹è¿°æ–‡ä»¶é™¤äº†.tomlæ–‡ä»¶ï¼Œå…¶ä½™éƒ½åœ¨.&#x2F;src&#x2F;ç›®å½•ä¸‹\n\n\n123Xargo.toml // æ–‡ä»¶å[target.bpfel-unknown.dependencies.std]features = []\n\n1234567891011121314151617Cargo.toml[package]name = &quot;escrow&quot;version = &quot;0.1.0&quot;edition = &quot;2021&quot;[features]no-entrypoint = [][dependencies]arrayref = &quot;0.3.6&quot;solana-program = &quot;2.0.8&quot;thiserror = &quot;1.0&quot;spl-token = &#123;version = &quot;6.0.0&quot;, features = [&quot;no-entrypoint&quot;]&#125;[lib]crate-type = [&quot;cdylib&quot;, &quot;lib&quot;]\n\n\nç¬¬ä¸€ä¸ªé¡¹ç›®è¦å­¦ä¹ çš„æ˜¯ä¸€ä¸ªæ‰˜ç®¡åˆçº¦ï¼Œä¸»è¦æ˜¯è§£å†³äº¤æ˜“ä¸­çš„å»ä¿¡ä»»é—®é¢˜ã€‚\nåœ¨åŒºå—é“¾ä¸­ï¼Œæ™ºèƒ½åˆçº¦åŒæ–¹å‡å¯è§ï¼Œå±äºå¤©ç„¶çš„å¯ä¿¡ç¬¬ä¸‰æ–¹ğŸ‘®â€â™‚ï¸ã€‚\nä¸è¿‡ï¼Œç†è®ºæ˜¯ç†è®ºğŸ¤—solanaå¹¶ä¸å®Œå…¨é€‚ç”¨ï¼Œå› ä¸ºsolanaåˆçº¦æ˜¯å¯ä»¥å‡çº§çš„ï¼Œæœ‰å¯èƒ½ä½ çœ‹åˆ°çš„ä¸ä¸€å®šæ˜¯è¢«éƒ¨ç½²çš„ï¼Œä¸è¿‡è¿™éƒ½ä¸é‡è¦ğŸ¤”æˆ‘ä»¬æš‚æ—¶æ¶‰åŠä¸åˆ°é‚£ä¸ªéƒ¨åˆ†\n\n\n\n\n\n\n\n\n\n\nåŸºäºæˆ‘ä¸ªäººçš„ç†è§£ï¼Œæ™ºèƒ½åˆçº¦å°±æ˜¯æ‰¿æ‹…ä¸€ç¬”äº¤æ˜“çš„ç¬¬ä¸‰æ–¹æ‹…ä¿ï¼Œç”¨æ¥ä¿è¯ä¸€åœºäº¤æ˜“ä¸­ä¸ä¼šäº§ç”Ÿäº¤æ˜“åŒæ–¹ç”±äºæ— æ³•ä¿¡ä»»å¯¹æ–¹æˆ–è€…ç¼ºå°‘å¯ä¿¡ä»»çš„ç¬¬ä¸‰æ–¹å¯¼è‡´äº¤æ˜“æ— æ³•æ­£å¸¸è¿›è¡Œã€‚æ‰“ä¸ªä¸æ°å½“çš„æ¯”å–»ï¼Œæœ‰ç‚¹åƒæ˜¯é€šè¿‡æ”¯ä»˜å® || å¾®ä¿¡è¿›è¡Œçš„äº¤æ˜“ï¼Œå¤§å®¶éƒ½èƒ½å¤Ÿå®Œå…¨çš„ä¿¡ä»»ï¼Œå°±æ˜¯å› ä¸ºä»–ä»¬åœ¨æˆ‘ä»¬çš„äº¤æ˜“ä¸­æä¾›äº†èµ„é‡‘äº¤æµçš„ä¿è¯ã€‚\n\n\n\n\n\n\nTIP\nåœ¨SolanaåŒºå—é“¾ä¸­ï¼Œæ™ºèƒ½åˆçº¦æ˜¯æ— çŠ¶æ€çš„ï¼Œä¸èƒ½ä¿å­˜ä»»ä½•æ•°æ®ã€‚æ‰€æœ‰éœ€è¦ä¿å­˜çš„æ•°æ®å‡ä¿å­˜åœ¨è´¦å·çš„dataå­—æ®µä¸­ã€‚\nå…³äºSpl-tokenåŠè´¦å·ç›¸å…³çš„ä¸€äº›åŸºç¡€çŸ¥è¯†è¯·è¯»è€…è‡ªè¡Œé˜…è¯»ç›¸åº”æ–‡ç« æˆ–è€…æºæ•™å­¦æ–‡ç« ã€‚\n\n\n\nåœ¨srcç›®å½•ä¸‹åˆ›å»ºerror.rs ,instruction.rs, processor.rs,entrypoint.rs,state.rsç¨åæˆ‘ä»¬å°†åœ¨è¿™äº›æ–‡ä»¶ä¸­æ’°å†™ä»£ç \n\nç¼–å†™åŸºæœ¬æ¡†æ¶\n\n\n\n\n\n\n\n\nä¸‹é¢ä¼šå…ˆæ”¾æºç ï¼Œå†æ”¾æˆ‘çš„ä¸ªäººç†è§£ï¼Œåªæƒ³çœ‹ä»£ç çš„å¯ä»¥é€šè¿‡å¤§çº²è¿›è¡Œè·³è½¬ã€‚\nError.rs12345678910111213141516use thiserror::Error;use solana_program::program_error::ProgramError;#[derive(Error,Debug,Copy,Clone)]pub enum EscrowError &#123;    // Invalid instruction    #[error(&quot;Invalid Instruction&quot;)]    InvalidInstruction,&#125;impl From&lt;EscrowError&gt; for ProgramError &#123;    fn from(e: EscrowError) -&gt; Self &#123;        ProgramError::Custom(e as u32)    &#125;&#125;\n\n\n\n\n\n\n\n\n\n\nè¿™é‡Œä½¿ç”¨thiserrorçš„åŸå› åŸæ–‡ä¸­å†™çš„å¾ˆæ˜ç¡®ï¼Œçœå»æˆ‘ä»¬æ‰‹åŠ¨å®ç°ç›¸å…³Traitã€‚\n\nsolanaç¨‹åºçš„è¿”å›å€¼é€šå¸¸ä¸ºProgramError,æ‰€ä»¥æˆ‘ä»¬åœ¨è¿™é‡Œä¸ºProgramErroræšä¸¾ä¸­çš„æ‰€æœ‰ç±»å‹å®ç°FromTraitè½¬æ¢ä¸ºEscrowError\n\ninstruction.rs12345678910111213141516171819202122232425262728293031323334353637383940414243use std::convert::TryInto;use crate::error::EscrowError::InvalidInstruction;use solana_program::program_error::ProgramError;pub enum EscrowInstruction &#123;    /// å› ä¸ºè¦åœ¨åˆå§‹åŒ–é‡Œè½¬ç§»ä¸´æ—¶ä»£å¸è´¦å·æ‰€æœ‰æƒï¼Œæ‰€ä»¥éœ€è¦åŸownerç­¾åï¼Œå¹¶ä¸”åŸownerä¹Ÿæ˜¯åˆå§‹åŒ–è€…    /// 0. `[signer]` The account of the person initializing the escrow    /// 1. `[writable]` Temporary token account that should be created prior to this instruction and owned by the initializer    /// 2. `[]` The initializer&#x27;s token account for the token they will receive should the trade go through    /// 3. `[writable]` The escrow account, it will hold all necessary info about the trade.    /// 4. `[]` The rent sysvar    /// 5. `[]` The token program    InitEscrow &#123;        /// The amount party A expects to receive of token Y        amount: u64    &#125;&#125;impl EscrowInstruction &#123;    pub fn unpack(input: &amp;[u8]) -&gt; Result&lt;Self, ProgramError&gt; &#123;        let (tag, rest) = input.split_first().ok_or(InvalidInstruction)?;                Ok(match tag &#123;            0 =&gt; Self::InitEscrow &#123;                amount: Self::unpack_amount(rest)?,            &#125;,            //æ³¨æ„è¿™é‡Œçš„ç”¨æ³•ï¼ŒInvalidInstructionè½¬åŒ–ä¸ºProgramErroræ—¶ï¼Œä½¿ç”¨äº†into          \t//å› ä¸ºæˆ‘ä»¬åœ¨error.rsä¸­å·²ç»å®ç°äº†é‚£ä¸ªfromï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬å®ç°into            _ =&gt; return Err(InvalidInstruction.into()),        &#125;)    &#125;    //è¿™é‡Œå­¦ä¹ Input è½¬åŒ–ä¸ºu64    fn unpack_amount(input: &amp;[u8]) -&gt; Result&lt;u64, ProgramError&gt; &#123;        let amount = input            .get(..8)            .and_then(|slice| slice.try_into().ok())            .map(u64::from_le_bytes)            .ok_or(InvalidInstruction)?;        Ok(amount)    &#125;&#125;\n\n\nåœ¨è¿™æ®µä»£ç é‡Œå‡†å¤‡ä¸€ä»½åˆå§‹åŒ–æŒ‡ä»¤ï¼Œç¼–å†™unpackå‡½æ•°ç”¨æ¥å°†è¾“å…¥æ•°æ®è§£æä¸ºä¸€ä¸ªæŒ‡ä»¤\n\nåç»­æ·»åŠ æ–°çš„æŒ‡ä»¤ç»§ç»­åœ¨unpackå‡½æ•°ä¸­æ·»åŠ å†…å®¹å³å¯ã€‚æ³¨æ„å‡½æ•°è¿”å›ç±»å‹Result&lt;Self, ProgramError&gt;\n\nç”±äºinputæ˜¯&amp;[u8]ç±»å‹ï¼Œæˆ‘ä»¬åœ¨åˆå§‹åŒ–ä»£å¸æ‰€æœ‰æƒä¸­ä½¿ç”¨äº†amount: u64,æ‰€ä»¥æˆ‘ä»¬éœ€è¦ç¼–å†™ä¸€ä¸ªç±»å‹è½¬æ¢ï¼Œä»inputä¸­åˆ‡å–ä»£è¡¨amountçš„éƒ¨åˆ†ã€‚\n\næ•´ä¸ªè¿‡ç¨‹çš„ç›®çš„æ˜¯å°è¯•ä» input çš„å‰ 8 ä¸ªå­—èŠ‚ä¸­è¯»å–ä¸€ä¸ª u64 å€¼ï¼š\nè·å–å‰ 8 ä¸ªå­—èŠ‚ï¼šé€šè¿‡ input.get(..8) å°è¯•è·å–åˆ‡ç‰‡çš„å‰ 8 ä¸ªå­—èŠ‚ã€‚\nè½¬æ¢åˆ‡ç‰‡åˆ°æ•°ç»„ï¼šä½¿ç”¨ .and_then å’Œ try_into() å°†å­—èŠ‚åˆ‡ç‰‡è½¬æ¢ä¸ºä¸€ä¸ªå›ºå®šå¤§å°çš„å­—èŠ‚æ•°ç»„ [u8; 8]ã€‚\n**è½¬æ¢å­—èŠ‚æ•°ç»„åˆ° u64**ï¼šä½¿ç”¨ map(u64::from_le_bytes) å°† [u8; 8] è½¬æ¢ä¸º u64ã€‚\né”™è¯¯å¤„ç†ï¼šå¦‚æœä»»ä½•ä¸€æ­¥å¤±è´¥ï¼Œè¿”å› InvalidInstruction é”™è¯¯ã€‚\n\n\n\n\n\nprocessor.rs12345678910111213141516171819202122232425262728293031323334353637use solana_program::&#123;    account_info::&#123;next_account_info,AccountInfo&#125;,    entrypoint::ProgramResult,    program_error::ProgramError,    msg,    pubkey::Pubkey,&#125;;use crate::instruction::EscrowInstruction;pub struct Processor;impl Processor &#123;    pub fn process(program_id: &amp;Pubkey, accounts: &amp;[AccountInfo], instruction_data: &amp;[u8]) -&gt; ProgramResult &#123;        let instruction = EscrowInstruction::unpack(instruction_data)?;                match instruction &#123;            EscrowInstruction::InitEscrow &#123;amount&#125; =&gt; &#123;                msg!(&quot;Instruction: InitEscrow&quot;);                Self::process_init_escrow(accounts,amount,program_id)            &#125;        &#125;    &#125;    fn process_init_escrow(        accounts: &amp;[AccountInfo],        amount: u64,        program_id: &amp;Pubkey    ) -&gt; ProgramResult &#123;        let account_info_iter = &amp;mut accounts.iter();        let initializer = next_account_info(account_info_iter)?;        if !initializer.is_signer &#123;            return Err(ProgramError::MissingRequiredSignature);        &#125;\t\t\t\t// todo        Ok(())    &#125;&#125;\n\n\n\n\n\n\n\nTIP\n\nè¿™é‡Œä¸€èˆ¬ä¸ºå›ºå®šçš„Processorç»“æ„ä½“ï¼ˆåªæ˜¯çº¦å®šï¼Œæ— å¼ºåˆ¶åŠ›ï¼‰ã€‚åœ¨è¯¥ç»“æ„ä½“ä¸Šåˆ›å»ºä¸€ä¸ªé™æ€å‡½æ•°processæ¥å¤„ç†å…¥å£è½¬å‘è¿‡æ¥çš„å‚æ•°ã€‚åœ¨è¯¥å‡½æ•°å†…éƒ¨ï¼Œé¦–å…ˆè§£ææŒ‡ä»¤ï¼Œç„¶åæ ¹æ®æŒ‡ä»¤è°ƒç”¨ç›¸åº”çš„å¤„ç†å‡½æ•°ã€‚\nprocessorè¿”å›çš„æ˜¯ProgramResultã€‚\nå‡½æ•°ä½“ä¸­?æ“ä½œç¬¦çš„ä½¿ç”¨ï¼Œå‘ä¸Šçº§è°ƒç”¨ä¼ é€’é”™è¯¯ã€‚\n\n\nprocess_init_escrowå¹¶æ²¡æœ‰å®Œå…¨ç¼–å†™ğŸ¤—åç»­ä¼šè¿›è¡Œç¼–å†™\n\n\n\nentrypoint.rs123456789101112131415161718//! Program entrypointuse crate::&#123;processor::Processor&#125;;use solana_program::&#123;    account_info::AccountInfo,     entrypoint,     entrypoint::ProgramResult,    pubkey::Pubkey,&#125;;entrypoint!(process_instruction);fn process_instruction(    program_id: &amp;Pubkey,    accounts: &amp;[AccountInfo],    instruction_data: &amp;[u8],) -&gt; ProgramResult &#123;    Processor::process(program_id, accounts, instruction_data) &#125;\n\n\nè¿™éƒ¨åˆ†åœ¨lib.rsä¸­å£°æ˜modçš„æ—¶å€™ï¼Œéœ€è¦è®¾å®šå¯å…³é—­entrypointç‰¹æ€§ï¼Œä¸ºäº†ç¨‹åºå¯ä»¥æ–¹ä¾¿çš„è¢«å…¶ä»–ç¨‹åºå¯¼å…¥ï¼ˆè¿™é‡ŒåŸæ–‡ä¸­ä¹Ÿåªæ˜¯æŒ‡å‡ºäº†æ–¹æ³•ï¼Œæ˜¯å‚è€ƒspl-tokenä¸­çš„è®¾ç½®å’Œç¼–å†™è€Œæ¥çš„ï¼‰^2\n\nstate.rs12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576use solana_program::&#123;    program_pack::&#123;IsInitialized, Pack, Sealed&#125;,    program_error::ProgramError,    pubkey::Pubkey,&#125;;pub struct Escrow &#123;    pub is_initialized: bool,    pub initializer_pubkey: Pubkey,    pub temp_token_account_pubkey: Pubkey,    pub initializer_token_to_receive_account_pubkey: Pubkey,    pub expected_amount: u64,&#125;impl Sealed for Escrow &#123;&#125;impl IsInitialized for Escrow &#123;    fn is_initialized(&amp;self) -&gt; bool &#123;        self.is_initialized    &#125;&#125;use arrayref::&#123;array_mut_ref, array_ref, array_refs, mut_array_refs&#125;;impl Pack for Escrow &#123;    const LEN: usize = 105;    fn unpack_from_slice(src: &amp;[u8]) -&gt; Result&lt;Self, ProgramError&gt; &#123;        let src = array_ref![src, 0, Escrow::LEN];        let (            is_initialized,            initializer_pubkey,            temp_token_account_pubkey,            initializer_token_to_receive_account_pubkey,            expected_amount,        ) = array_refs![src, 1, 32, 32, 32, 8];        let is_initialized = match is_initialized &#123;            [0] =&gt; false,            [1] =&gt; true,            _ =&gt; return Err(ProgramError::InvalidAccountData),        &#125;;        Ok(Escrow &#123;            is_initialized,            initializer_pubkey: Pubkey::new_from_array(*initializer_pubkey),            temp_token_account_pubkey: Pubkey::new_from_array(*temp_token_account_pubkey),            initializer_token_to_receive_account_pubkey: Pubkey::new_from_array(*initializer_token_to_receive_account_pubkey),            expected_amount: u64::from_le_bytes(*expected_amount),        &#125;)    &#125;    fn pack_into_slice(&amp;self, dst: &amp;mut [u8]) &#123;        let dst = array_mut_ref![dst, 0, Escrow::LEN];        let (            is_initialized_dst,            initializer_pubkey_dst,            temp_token_account_pubkey_dst,            initializer_token_to_receive_account_pubkey_dst,            expected_amount_dst,        ) = mut_array_refs![dst, 1, 32, 32, 32, 8];        let Escrow &#123;            is_initialized,            initializer_pubkey,            temp_token_account_pubkey,            initializer_token_to_receive_account_pubkey,            expected_amount,        &#125; = self;        is_initialized_dst[0] = *is_initialized as u8;        initializer_pubkey_dst.copy_from_slice(initializer_pubkey.as_ref());        temp_token_account_pubkey_dst.copy_from_slice(temp_token_account_pubkey.as_ref());        initializer_token_to_receive_account_pubkey_dst.copy_from_slice(initializer_token_to_receive_account_pubkey.as_ref());        *expected_amount_dst = expected_amount.to_le_bytes();    &#125;&#125;\n\n\n\n\n\n\n\nTIP\n\nç›¸åŒç›®å½•åˆ›å»ºstate.rsï¼Œæ–‡ä»¶ç”¨æ¥å®šä¹‰çŠ¶æ€ä¿å­˜å¯¹è±¡å¹¶ç¼–å†™ç›¸åº”çš„ç¨‹åºå¤„ç†åºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼ˆä¹Ÿå°±æ˜¯å°†å­—èŠ‚æ•°ç»„å’Œæ•°æ®ç»“æ„ç›¸äº’è½¬æ¢ï¼‰\næˆ‘ä»¬çš„ç»“æ„éœ€è¦å®ç°program_pack::&#123;IsInitialized, Pack, Sealed&#125; è¿™ä¸‰ä¸ªç‰¹å‹ã€‚\nconst LEN: usize = 105;è¿™é‡Œç»“æ„çš„å¤§å°æ˜¯æ ¹æ®å„ä¸ªå­—æ®µçš„å¤§å°ç›¸åŠ å¾—åˆ°çš„ï¼Œåˆ†åˆ«ä¸º1 + 32*3 + 8 = 105ã€‚\nunpack_from_sliceä¸pack_into_sliceå¹¶ä¸æ˜¯ç›´æ¥è¢«ç¨‹åºçš„å…¶å®ƒéƒ¨åˆ†è°ƒç”¨çš„ï¼ŒPackç‰¹å‹æœ‰ä¸¤ä¸ªé»˜è®¤å‡½æ•°ï¼Œåˆ†åˆ«è°ƒç”¨è¿™ä¸¤ä¸ªå‡½æ•°ã€‚\næ³¨æ„array_mut_ref, array_ref, array_refs, mut_array_refsè¿™å‡ ä¸ªå®çš„ç”¨æ³•ï¼Œçœ‹åå­—å°±èƒ½çŒœåˆ°ï¼Œåˆ†åˆ«ä¸ºå¾—åˆ°ä¸€ä¸ªæ•°ç»„çš„å¯å˜å¼•ç”¨ï¼Œå¾—åˆ°ä¸€ä¸ªæ•°ç»„çš„å¼•ç”¨ ï¼Œå¾—åˆ°å¤šä¸ªæ•°ç»„çš„å¼•ç”¨ï¼Œå¾—åˆ°å¤šä¸ªæ•°ç»„çš„å¯å˜å¼•ç”¨ã€‚\næ³¨æ„ç¤ºä¾‹ä¸­ä»å­—èŠ‚æ•°ç»„å¾—åˆ°å…¬é’¥çš„æ–¹æ³•copy_from_slice\nç¤ºä¾‹ä¸­ä»å­—èŠ‚æ•°ç»„å¾—åˆ°u64é‡‡ç”¨äº†to_le_byteså·¦å¯¹é½çš„æ–¹å¼ï¼ŒRustä¸­è¿˜æœ‰ç±»ä¼¼çš„å³å¯¹é½æ–¹å¼ã€‚ä½†ä¸€èˆ¬Solanaä¸­é‡‡ç”¨ç±»Cçš„å·¦å¯¹é½æ–¹å¼ã€‚\nå¸ƒå°”å€¼å¯ä»¥ç›´æ¥è½¬æ¢ä¸ºu8ï¼Œè§is_initialized as u8ã€‚\n\n\n\nlib.rs123456#[cfg(not(feature = &quot;no-entrypoint&quot;))]mod entrypoint;pub mod error;pub mod instruction;pub mod processor;pub mod state;\n\n","slug":"Solana-coding-learning","date":"2024-09-01T14:56:16.000Z","categories_index":"Rust,åŒºå—é“¾","tags_index":"rust,solana","author_index":"RaphaelNY"},{"id":"8c17d3487aed17c3a795749d1b71c388","title":"ç¢ç¢å¿µçš„emoæƒ…ç»ª","content":"","slug":"emo-time","date":"2024-04-27T16:00:00.000Z","categories_index":"Emo","tags_index":"emo","author_index":"RaphaelNY"},{"id":"3b9e33d00820bf2a8cfa74fde48d213b","title":"tauriä¸ªäººå…¥é—¨å»ºè®®","content":"å‰è¨€\n\n\n\n\n\nTIP\nâœ¨å¦‚æœä½ æ²¡æœ‰æ¥è§¦è¿‡ç›¸å…³çš„å‰ç«¯å†…å®¹ï¼ˆç®€å•ç†è§£ä¸ºå°±æ˜¯ä½ æ”¾è¿™ä¹ˆå¤šä¸œè¥¿åœ¨è¿™æˆ‘ä¹Ÿä¸çŸ¥é“è¿™äº›å‰ç«¯æ€ä¹ˆç©ğŸ˜¤ï¼‰ã€‚æˆ‘å¼ºçƒˆå»ºè®®ä½ é€šè¿‡å®˜æ–¹æ–‡æ¡£ä¸­çš„è‡ªä¸»æ„å»ºè€Œä¸æ˜¯ä½¿ç”¨$cargo cteate-tauri-appæ¥è¿›è¡Œå…¥é—¨ğŸ¦€ï¼ˆåšä¸»åœ¨æœ€å¼€å§‹çš„æ—¶å€™å°è¯•äº†å®ƒã€‚å®ƒä¼šä¸€æ¬¡æ€§ä¸ºä½ æä¾›æ•´ä¸ªå®Œæ•´çš„ä»£ç æ¡†æ¶ï¼Œä¸»è¦åœ¨äºå‰ç«¯æ¡†æ¶ğŸ¤”ä½†æ˜¯å‡å¦‚ä½ å¸Œæœ›è¾¹å­¦è¾¹åšï¼Œæˆ‘è¿˜æ˜¯å»ºè®®ä»è‡ªå»ºå¼€å§‹ğŸ˜æ¯•ç«Ÿä¸€ä¸‹å­æ¥è§¦ä¸€å¤§å †çš„ä»£ç ï¼Œå­¦ä¹ æ›²çº¿çœŸçš„å¾ˆé«˜ğŸ¥²ï¼‰\n\nå®‰è£…tauriæ— è®ºä½ å¸Œæœ›å¦‚ä½•å¼€å§‹ä½ çš„å·¥ä½œã€‚tauriä¾èµ–æ˜¯å¿…é¡»å®‰è£…çš„ã€‚ä½ å¯ä»¥ç›´æ¥ctrl+Ræ‰“å¼€cmdã€‚è¾“å…¥ï¼š\n1cargo install tauri-cli\n\nå®‰è£…æ—¶é—´æ¯”è¾ƒé•¿ï¼Œä½ å¯èƒ½è¦ç¨ç­‰ä¸€ä¸‹ã€‚æ³¨æ„ä½ çš„æ€æ¯’è½¯ä»¶ã€‚åšä¸»åœ¨å®‰è£…çš„æ—¶å€™å°±ç¢°åˆ°æ€æ¯’è½¯ä»¶æ€æ­»å®‰è£…è¿‡ç¨‹ä¸­è£…å…¥çš„ä¸€äº›ä¾èµ–ï¼ˆæˆ‘ä½¿ç”¨çš„æ˜¯è¿ˆå…‹è²ğŸ˜¡ä½“éªŒçœŸçš„æœ‰ç‚¹çƒ‚äº†ã€‚æ·»åŠ ç™½åå•æ€ä¹ˆä¹ŸåŠ ä¸è¿›å»ï¼Œè€Œä¸”ä¸èƒ½ç›´æ¥å¤åˆ¶è·¯å¾„æ¥å¿«é€Ÿç§»åŠ¨åˆ°æƒ³è¦çš„è·¯å¾„ğŸ˜¤ï¼‰ï¼Œè¢«ç‹ ç‹ çš„æ¶å¿ƒåˆ°äº†ã€‚\n\n\n\n\n\n\nTIP\nåœ¨æ‰€æœ‰çš„å·¥ä½œä¹‹å‰ï¼Œä½ å¿…é¡»å®‰è£…rustå’Œä¸€äº›ç›¸å…³çš„å†…å®¹ï¼Œè¿™äº›è¯·å‚è€ƒä¸€äº›å…¶ä»–çš„æ–‡ç« ï¼Œæ¯”å¦‚å®‰è£… Rust ç¯å¢ƒ - Rustè¯­è¨€åœ£ç»(Rust Course)\n\n\næ–°å»ºæ–‡ä»¶å¤¹âœ¨å‡å¦‚ä½ æ˜¯githubçš„å¸¸å®¢ã€‚æˆ‘çš„å»ºè®®æ˜¯åœ¨githubä¸Šåˆ›å»ºé¡¹ç›®ã€‚æ·»åŠ READMEå’ŒLICENSEï¼ˆä¸ä¼šæœ‰äººä¸å–œæ¬¢ä¸ºè‡ªå·±çš„é¡¹ç›®æ·»åŠ READMEå§ğŸ˜ºï¼‰ç„¶åç›´æ¥é€šè¿‡git cloneåˆ°æœ¬åœ°ã€‚æ¥ä¸‹æ¥åœ¨é¡¹ç›®è·¯å¾„ä¸‹æ‰“å¼€ç»ˆç«¯\n12mkdir uicargo tauri init\n\n\næ‚¨åº”ç”¨çš„åå­—æ˜¯ä»€ä¹ˆï¼Ÿè¿™å°†ä¼šæ˜¯æ‚¨æ‰“åŒ…åå’Œæ“ä½œç³»ç»Ÿä¼šè°ƒç”¨çš„åº”ç”¨åç§°ã€‚ æ‚¨å¯ä»¥åœ¨æ­¤å¤„å¡«å†™ä»»ä½•æ‚¨æƒ³è¦çš„åç§°ã€‚\n\nçª—å£æ ‡é¢˜å«ä»€ä¹ˆï¼Ÿè¿™å°†ä¼šæ˜¯æ‚¨ä¸»çª—å£çš„é»˜è®¤æ ‡é¢˜ã€‚ æ‚¨å¯ä»¥åœ¨æ­¤å¤„å¡«å†™ä»»ä½•æ‚¨æƒ³è¦çš„åç§°ã€‚\n\nå‰ç«¯é¡µé¢èµ„æº (HTML&#x2F;CSS&#x2F;JS) ç›¸å¯¹äº &lt;current dir&gt;/src-tauri/tauri.conf.json æ–‡ä»¶å°†è¢«åˆ›å»ºçš„ä½ç½®ï¼Ÿ\nè¿™æ˜¯ç¯å¢ƒæ—¶tauriåŠ è½½webå‰ç«¯èµ„æºçš„ç›®å½•ï¼ˆä½¿ç”¨..&#x2F;ui)\n\nå¼€å‘ç¯å¢ƒæ—¶çš„åŠ è½½è·¯å¾„?\nå¯ä»¥æ˜¯ä¸€ä¸ªç½‘ç»œåœ°å€ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªæ–‡ä»¶è·¯å¾„ï¼ˆä½¿ç”¨..&#x2F;uiï¼‰\n\nä½ å°†ä½¿ç”¨ä»€ä¹ˆå‘½ä»¤æ¥å¼€å‘å‰ç«¯é¡µé¢ï¼Ÿ\nè¿™æ˜¯å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨çš„å‘½ä»¤(æˆ‘å»ºè®®ç•™ç©º)\n\nä½ å°†ä½¿ç”¨ä»€ä¹ˆå‘½ä»¤æ¥æ„å»ºå‰ç«¯é¡µé¢ï¼Ÿ\nè¿™æ˜¯æ„å»ºå‰ç«¯æ–‡ä»¶çš„å‘½ä»¤ï¼ˆæˆ‘å»ºè®®ç•™ç©ºï¼‰\n\n\nç„¶ååœ¨uiç›®å½•ä¸‹é¢æ–°å»ºä¸€ä¸ªç®€å•çš„index.htmlæ–‡ä»¶\n1234567891011&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;  &lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot; /&gt;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;    &lt;title&gt;æ–‡æ¡£&lt;/title&gt;  &lt;/head&gt;  &lt;body&gt;    &lt;h1&gt;è¿™æ˜¯æ¥è‡ª Tauri çš„æ¬¢è¿ï¼&lt;/h1&gt;  &lt;/body&gt;&lt;/html&gt;\n\nâœ¨åˆ°æ­¤ï¼Œä½ å°±å®Œæˆäº†æ‰€æœ‰åŸºç¡€å®‰è£…ã€‚å¯ä»¥å¼€å§‹ä½ çš„æ„ç­‘äº†ã€‚\n\n\n\n\n\n\nTIP\nä¹Ÿè®¸åœ¨è¿™ä¹‹å‰ä½ åº”è¯¥è¿è¡Œè¿™ä¸¤æ®µä»£ç \n12cargo tauri buildcargo tauri dev\n\nåœ¨ä½ çš„é¡¹ç›®ç›®å½•ä¸‹ã€‚ç¬¬ä¸€æ¬¡ç¼–è¯‘çš„æ—¶é—´ä¼šæ¯”è¾ƒé•¿\nå‡å¦‚ä½ è¿è¡Œçš„æ—¶å€™äº§ç”ŸæŠ¥é”™äº†ï¼Œé‚£ç§å¾ˆå¥‡æ€ªçš„æŠ¥é”™ã€‚æˆ‘æ¨èæ£€æŸ¥ä¸€ä¸‹tauri.conf.jsonä¸­çš„buildå­—æ®µä¸­è¿™ä¸¤ä¸ªå­—æ®µæ˜¯å¦ä¸ºç©ºã€‚\n12345678&#123;&quot;build&quot;: &#123;\t&quot;beforeBuildCommand&quot;: &quot;&quot;,\t&quot;beforeDevCommand&quot;: &quot;&quot;ï¼Œ\t...\t&#125;,...&#125;\n\nä¸ªäººæ„Ÿè§‰ï¼Œå¦‚æœä½ ä¹ æƒ¯ä½¿ç”¨cargoè¿›è¡ŒåŒ…ç®¡ç†ï¼Œè¿™æ ·åšæ˜¯æœ€æ–¹ä¾¿çš„ğŸ˜ºã€‚\n\n\nâœ¨å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨$cargo cteate-tauri-appæ¥å¼€å§‹ä½ çš„å·¥ä½œï¼Œè¿™ç§æ–¹å¼æ›´åŠ ç®€å•å¿«æ·ï¼Œç›¸å½“äºç›´æ¥ä¸‹è½½æ¨¡æ¿æ¡†æ¶\nâœ¨åˆ°æ­¤ï¼Œä½ åº”è¯¥èƒ½å¤Ÿå®Œæˆtauriçš„åˆæ­¥å®‰è£…ã€‚é€šè¿‡$cargo tauri devæ‰“å¼€ä½ æ‰€å®‰è£…çš„æ¨¡æ¿ç¨‹åºğŸ˜\nğŸ¤”å¦‚æœä½ å‡ºç°äº†ä»€ä¹ˆå¥‡æ€ªçš„é—®é¢˜ä¹Ÿå¯ä»¥è·Ÿæˆ‘åˆ†äº«ğŸ¤”\n","slug":"tauri-start-tutorial","date":"2024-04-27T12:25:49.000Z","categories_index":"Rust,tauri","tags_index":"rust,tauri","author_index":"RaphaelNY"},{"id":"cb74cf4ec6063240bdd2492df0bbdf14","title":"Rust desktop application","content":"Rust Desktop Application Development Practiceåœ¨è¿™ä¸€ç¯‡ä¸­å‡†å¤‡è®°å½•ä¸€ä¸‹æœ¬æ­¤æ¬¡é¡¹ç›®ä»é€‰æ‹©åˆ°æ„ç­‘å®ç°çš„å„ç§å¿ƒè·¯å†ç¨‹ã€‚è€Œå…·ä½“é‡åˆ°çš„é—®é¢˜å’Œæ³¨æ„åº”è¯¥ä¼šå•ç‹¬å¼€ä¸€ç¯‡æ¥è®°å½•ã€‚\n\noriginè¿™ä¸¤å¤©çœ‹åˆ°äº†è¿™ä¸ªè§†é¢‘ğŸ“ºï¼Œå…³äºä½¿ç”¨tauri+åç«¯RustğŸ¦€+æ•°æ®åº“SurrealDBå®ç°çš„ä¸€ä¸ªæ¡Œé¢åº”ç”¨ã€‚\næ°å¥½æœ€è¿‘æ­£åœ¨å­¦ä¹ rsutğŸ¦€å’Œæ•°æ®åº“çš„ç›¸å…³çŸ¥è¯†ï¼Œæ‰€ä»¥æƒ³è¦åˆ¶ä½œä¸€ä¸ªç±»ä¼¼çš„âœ¨æ¡Œé¢åº”ç”¨ã€‚å‰ç«¯ä½¿ç”¨ä»€ä¹ˆè¿˜æ²¡æœ‰ç¡®å®šä¸‹æ¥ğŸ¤”ã€‚åç«¯å’Œæ•°æ®åº“å‡†å¤‡ä½¿ç”¨RustğŸ¦€å’ŒSurrealDBã€‚æ¥ä¸‹æ¥å‡†å¤‡å¼€è¿™ä¸ªå‘ğŸ˜ğŸ˜\n\n\n\n\n\n\nTIP\nâœ¨[ä½¿ç”¨Rustã€Tauriå’ŒSurrealDBæ„å»ºä»¤äººæƒŠå¹çš„æ¡Œé¢åº”ç”¨ç¨‹åº]ä¸­å­—\n\ndate: 2024-04-26\n\nbuild a tauri appâœ¨ç»è¿‡è®¨è®ºï¼Œæˆ‘ä»¬æœ€ç»ˆå†³å®šä½¿ç”¨tauriæ¥ä½œä¸ºæˆ‘ä»¬çš„å·¥å…·è¿›è¡Œæˆ‘ä»¬çš„appæ„ç­‘ğŸ˜\nâœ¨ä¹Ÿè®¸æˆ‘ä»¬çš„å‰ç«¯é€‰æ‹©éå¸¸æ„šè ¢ã€‚ä½†æ˜¯æˆ‘ä»¬å¸Œæœ›æˆ‘ä»¬çš„å‰ç«¯uièƒ½å¤Ÿå®ç°æˆ‘ä»¬çš„ä¸€äº›å¼‚æƒ³å¤©å¼€ğŸ§ \nâœ¨æœ€ç»ˆé€‰æ‹©æœ€ä¸ºåŸºç¡€çš„ä½¿ç”¨HTMLã€CSSã€JavaScriptæ¥ä½œä¸ºæˆ‘ä»¬çš„å‰ç«¯è¯­è¨€å®ç°ğŸ¤” \nproject introduce\né¡¹ç›®åï¼šLumijade\næœ¬æ¬¡é¡¹ç›®å°†ç”±æˆ‘ä»¬ç»„ç»‡**VernunftIstWirklich** ä¸­çš„ä¸‰ä¸ªäººå…±åŒå¼€å‘ğŸ’•\n\nâ€”- å¾…ç»­ â€”-\ndate: 2024-04-27\n","slug":"Rust-desktop-application","date":"2024-04-26T15:07:08.000Z","categories_index":"Rust,tauri","tags_index":"rust,SurrealDB,tauri","author_index":"RaphaelNY"},{"id":"f8b5cac907ef39197862c4a0ab4ae287","title":"Welcome to my blog","content":"welcome to my blogå¸Œæœ›æ¯ä¸€ä½åˆ°æ¥çš„è®¿å®¢éƒ½èƒ½å¤Ÿå­¦ä¹ åˆ°ï¼Œæˆ–è€…äº†è§£åˆ°æœ‰è¶£çš„ä¸œè¥¿ğŸ˜ğŸ˜\næˆ‘ä¹Ÿä¼šå°½æˆ‘æ‰€èƒ½çš„æ›´æ–°æœ‰è¶£çš„å†…å®¹ï¼ğŸ˜ŠğŸ˜Š\nå½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨æœ¬ç¯‡æ–‡ç« çš„è¯„è®ºä¸­æå‡ºæ‰¹è¯„å»ºè®®ğŸ˜£ã€‚æˆ–è€…ä½ å¸Œæœ›æˆ‘å»å­¦ä¹ äº†è§£ä»€ä¹ˆå†…å®¹ğŸ¤”\nå½“ç„¶ï¼Œç”±äºæ˜¯å­¦ç”Ÿçš„é—®é¢˜ğŸ§‘â€ğŸ“ï¼Œæˆ‘çš„æ›´æ–°æ˜¯ä¸å®šæœŸçš„å“ŸğŸ˜˜\n","slug":"Welcome-to-my-blog","date":"2024-04-26T03:23:27.000Z","categories_index":"announcement","tags_index":"announcement","author_index":"RaphaelNY"}]